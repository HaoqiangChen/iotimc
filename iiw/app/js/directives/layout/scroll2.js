define(["angular","iscroll2","directives/layout/resize"],function(e,i){e.directive("iScroll2",[function(){return{restrict:"A",template:'<div i-resize="resize" ng-transclude style="position: absolute"></div>',transclude:!0,scope:!0,link:function(e,n,r){n.css("overflow","hidden");var o={mouseWheel:!0,scrollbars:!0,fadeScrollbars:!0,disableMouse:!1};r.config&&"string"==typeof r.config&&(o=JSON.parse(r.config));var s=new i(n.get(0),o);n.data("i-scroll",s),e.resize=function(){s&&s.refresh()},n.children(":first").children(":first").css("position","static"),s.on("scrollEnd",function(){s.y<=s.maxScrollY&&r.loadEvent&&e.$parent.$eval(r.loadEvent)}),e.$on("$destroy",function(){s&&(s.destroy(),s=null)})}}}])});