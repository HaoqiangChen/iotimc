define(["angular"],function(t){t.directive("iExit",["$state","iConfig",function(t,i){return{restrict:"A",scope:{state:"=exitState"},link:function(n,e){function o(){$(".iiw-exit").show("fade")}function u(){$(".iiw-exit").hide("fade")}function c(){try{var i=requireNW("nw.gui"),e=i.Window.get();e.close()}catch(o){window.opener=null,window.open(location,"_self",""),window.close(),setTimeout(function(){t.go(n.state)},300),u()}}n.state||(i.get("webcontextpath")?n.state=i.get("webcontextpath").content||"login":n.state="login"),n.state=n.state||"login",e.on("click",function(){if(!$(".iiw-exit").size()){var t=[];t.push('<div class="iiw-exit">'),t.push('<div class="layout-full table">'),t.push('<div class="table-cell">'),t.push('<div class="iiw-exit-panel">'),t.push("<p>确认退出系统？</p>"),t.push('<div class="iiw-exit-buttons">'),t.push('<button class="exitButton button button-glow button-rounded button-caution">确认</button>'),t.push('<button class="cancelButton button button-rounded button-primary">取消</button>'),t.push("</div>"),t.push("</div>"),t.push("</div>"),t.push("</div>"),t.push("</div>"),$("body").append(t.join("")),setTimeout(function(){$(".iiw-exit").click(u),$(".iiw-exit-panel").click(function(t){t.cancelable=!0,t.stopPropagation()}),$(".iiw-exit").find(".exitButton").click(c),$(".iiw-exit").find(".cancelButton").click(u)},300)}o()})}}}])});