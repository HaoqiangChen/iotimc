define(["app","css!../../css/reg.css"],function(e){e.controller("regController",["$scope","$timeout",function(e,t){var o=!1;e.key=$.soa.regkey,e.regtext=$.soa.regtext||"系统未注册";var r;e.copy=function(){$(".reg-copy-btn").attr("title","已复制").tooltip("show"),r&&clearTimeout(r),r=setTimeout(function(){$(".reg-copy-btn").attr("title","").tooltip("hide")},2e3)},e.clickUpload=function(){angular.element(".reg-upform").html('<form method="post" enctype="multipart/form-data" action="sys/reg/register.do?action=register&ptype=file" target="regTargetFrame"><input id="regfile" name="regfile" type="file" accept=".key" onchange="angular.element(this).scope().submitRegForm(this.value)"/></form>'),t(function(){$(".reg-upform input").click()},150)},e.submitRegForm=function(e){e&&($(".reg-upform form").submit(),o=!0)},e.reload=function(){o&&(location=$.soa.root)}}])});
