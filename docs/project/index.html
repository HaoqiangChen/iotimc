<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>项目开发 | 安防平台开发笔记</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/iotimc/logo.png">
    <meta name="description" content="安防平台iiw前端框架开发指南">
    <link rel="preload" href="/iotimc/assets/css/0.styles.2b312acd.css" as="style"><link rel="preload" href="/iotimc/assets/js/app.bfdb41ac.js" as="script"><link rel="preload" href="/iotimc/assets/js/2.00b9de49.js" as="script"><link rel="preload" href="/iotimc/assets/js/28.1da70d04.js" as="script"><link rel="prefetch" href="/iotimc/assets/js/10.1f03c4c6.js"><link rel="prefetch" href="/iotimc/assets/js/11.386b71bd.js"><link rel="prefetch" href="/iotimc/assets/js/12.e1a311c3.js"><link rel="prefetch" href="/iotimc/assets/js/13.8d5eecd9.js"><link rel="prefetch" href="/iotimc/assets/js/14.b943a3b6.js"><link rel="prefetch" href="/iotimc/assets/js/15.f4038dd5.js"><link rel="prefetch" href="/iotimc/assets/js/16.47d74c53.js"><link rel="prefetch" href="/iotimc/assets/js/17.4c47a705.js"><link rel="prefetch" href="/iotimc/assets/js/18.c2b973a0.js"><link rel="prefetch" href="/iotimc/assets/js/19.6c7c6841.js"><link rel="prefetch" href="/iotimc/assets/js/20.859b3968.js"><link rel="prefetch" href="/iotimc/assets/js/21.b8995111.js"><link rel="prefetch" href="/iotimc/assets/js/22.7224adbd.js"><link rel="prefetch" href="/iotimc/assets/js/23.16f1f323.js"><link rel="prefetch" href="/iotimc/assets/js/24.680aabe4.js"><link rel="prefetch" href="/iotimc/assets/js/25.388ed37f.js"><link rel="prefetch" href="/iotimc/assets/js/26.c4f796c4.js"><link rel="prefetch" href="/iotimc/assets/js/27.4096b47d.js"><link rel="prefetch" href="/iotimc/assets/js/29.66c1ff2c.js"><link rel="prefetch" href="/iotimc/assets/js/3.f1ae2017.js"><link rel="prefetch" href="/iotimc/assets/js/30.f97883d8.js"><link rel="prefetch" href="/iotimc/assets/js/31.bcace418.js"><link rel="prefetch" href="/iotimc/assets/js/32.ff66498e.js"><link rel="prefetch" href="/iotimc/assets/js/4.d6f4ccb3.js"><link rel="prefetch" href="/iotimc/assets/js/5.36f2502e.js"><link rel="prefetch" href="/iotimc/assets/js/6.b7d3f443.js"><link rel="prefetch" href="/iotimc/assets/js/7.88e0b554.js"><link rel="prefetch" href="/iotimc/assets/js/8.8b79f253.js"><link rel="prefetch" href="/iotimc/assets/js/9.f48a7382.js">
    <link rel="stylesheet" href="/iotimc/assets/css/0.styles.2b312acd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/iotimc/" class="home-link router-link-active"><img src="/iotimc/logo.png" alt="安防平台开发笔记" class="logo"> <span class="site-name can-hide">安防平台开发笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/iotimc/note/iiw-code/" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="/iotimc/api/iiwpost/" class="nav-link">
  接口
</a></div><div class="nav-item"><a href="/iotimc/chart/" class="nav-link">
  图表
</a></div><div class="nav-item"><a href="/iotimc/oracle/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/iotimc/project/" class="nav-link router-link-exact-active router-link-active">
  项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iotimc/project/" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/iotimc/en/" class="nav-link">
  English
</a></li></ul></div></div> <a href="https://github.com/HaoqiangChen/iotimc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/iotimc/note/iiw-code/" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="/iotimc/api/iiwpost/" class="nav-link">
  接口
</a></div><div class="nav-item"><a href="/iotimc/chart/" class="nav-link">
  图表
</a></div><div class="nav-item"><a href="/iotimc/oracle/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/iotimc/project/" class="nav-link router-link-exact-active router-link-active">
  项目
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="选择语言" class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/iotimc/project/" class="nav-link router-link-exact-active router-link-active">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/iotimc/en/" class="nav-link">
  English
</a></li></ul></div></div> <a href="https://github.com/HaoqiangChen/iotimc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>项目</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/iotimc/project/" class="active sidebar-link">项目开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/iotimc/project/#安防平台" class="sidebar-link">安防平台</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/iotimc/project/#在本机部署一套安防平台测试服务" class="sidebar-link">在本机部署一套安防平台测试服务</a></li><li class="sidebar-sub-header"><a href="/iotimc/project/#首先安装-oracle-数据库" class="sidebar-link">首先安装 oracle 数据库</a></li><li class="sidebar-sub-header"><a href="/iotimc/project/#安防平台服务管理" class="sidebar-link">安防平台服务管理</a></li><li class="sidebar-sub-header"><a href="/iotimc/project/#创建oracle数据库" class="sidebar-link">创建oracle数据库</a></li><li class="sidebar-sub-header"><a href="/iotimc/project/#验证安装" class="sidebar-link">验证安装</a></li><li class="sidebar-sub-header"><a href="/iotimc/project/#安防平台系统程序部署" class="sidebar-link">安防平台系统程序部署</a></li><li class="sidebar-sub-header"><a href="/iotimc/project/#平时开发测试" class="sidebar-link">平时开发测试</a></li></ul></li></ul></li><li><a href="/iotimc/project/applet.html" class="sidebar-link">小程序</a></li><li><a href="/iotimc/project/app.html" class="sidebar-link">APP</a></li><li><a href="/iotimc/project/terminal.html" class="sidebar-link">终端</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="项目开发"><a href="#项目开发" class="header-anchor">#</a> 项目开发</h1> <p>公司除了安防平台项目，还有很多其他的大小项目。</p> <h2 id="安防平台"><a href="#安防平台" class="header-anchor">#</a> 安防平台</h2> <h3 id="在本机部署一套安防平台测试服务"><a href="#在本机部署一套安防平台测试服务" class="header-anchor">#</a> 在本机部署一套安防平台测试服务</h3> <h3 id="首先安装-oracle-数据库"><a href="#首先安装-oracle-数据库" class="header-anchor">#</a> 首先安装 oracle 数据库</h3> <p>首先在网上下载 oracle 软件包，以下介绍安装 oracle11g 安装教程</p> <ol><li>直接去<code>oracle</code>官网<a href="http://www.oracle.com/" target="_blank" rel="noopener noreferrer">http://www.oracle.com/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>进行相应版本下载，之后会有两个压缩包，下载完成后将两个文件解压到同一个目录下</li></ol> <div class="custom-block danger"><p class="custom-block-title">注意</p> <p>路径名称最好不要出现中文和空格等不规则符号，否则之后可能出现不可预知的错误</p></div> <ol start="2"><li>解压缩文件，将两个压缩包解压到同一个文件夹中</li></ol> <p><img src="/oracle11g.png" alt="oracle11g安装包解压到同一目录"></p> <ol start="3"><li>将其解压到同一个路径后，找到<code>database\stage\cvu\cvu_prereq.xml</code>用文本打开编辑添加win10适配；</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>OPERATING_SYSTEM</span> <span class="token attr-name">RELEASE</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>6.2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VERSION</span> <span class="token attr-name">VALUE</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ARCHITECTURE</span> <span class="token attr-name">VALUE</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>64-bit<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NAME</span> <span class="token attr-name">VALUE</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Windows 10<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ENV_VAR_LIST</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ENV_VAR</span> <span class="token attr-name">NAME</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>PATH<span class="token punctuation">&quot;</span></span> <span class="token attr-name">MAX_LENGTH</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1023<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ENV_VAR_LIST</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>OPERATING_SYSTEM</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="/oracle-setup1.png" alt="添加win10适配"></p> <p>之后在解压文件夹中找到可执行文件【setup.exe】双击安装，配置安全更新操作，出现如下界面，点击下一步即可</p> <p><img src="/oracle-setup2.png" alt="setup.exe"></p> <ol start="4"><li>选择安装方式，选择仅安装数据库软件，如下图所示</li></ol> <p><img src="/oracle-step4.png" alt="选择仅安装数据库软件"></p> <ol start="5"><li><p>网络安装选项、产品语言、数据库版本中三个步骤都默认选择即可，点击下一步</p></li> <li><p>安装位置中的软件位置必须安装在D盘，在软件位置中输入安装路径（默认目录：D:\oracle\product\11.2.0\dbhome_1）</p></li></ol> <p><img src="/oracle-step6.png" alt="安装位置中的软件位置必须安装在D盘"></p> <ol start="7"><li><p>先决条件检查，等待检查完成查看安装环境是否允许安装，允许安装即会自动跳转至概要选项中</p></li> <li><p>概要选项中，点击完成按钮开始安装，如下图所示</p></li></ol> <p><img src="/oracle-step8.png" alt="概要选项中，点击完成按钮开始安装"></p> <ol start="9"><li>开始安装oracle程序，如下图所示</li></ol> <p><img src="/oracle-step9.png" alt="开始安装oracle程序"></p> <ol start="10"><li>安装完成oracle程序，点击关闭即可。</li></ol> <h3 id="安防平台服务管理"><a href="#安防平台服务管理" class="header-anchor">#</a> 安防平台服务管理</h3> <ol><li>以系统管理员身份运行DOS命令行，如下图所示</li></ol> <p><img src="/services-step1.png" alt="以系统管理员身份运行DOS命令行"></p> <ol start="2"><li>在命令行输入命令<code>lsnrctl start</code>中创建监听服务，如下图所示</li></ol> <p><img src="/services-step2.png" alt="在命令行输入命令（lsnrctl start）中创建监听服务"></p> <ol start="3"><li>创建成功后，打开系统服务（可运行<code>services.msc</code>打开服务），查看是否有<code>OracleOraDb11g_home1TNSListener</code>服务，成功的状态是已启动，如下图所示</li></ol> <p><img src="/services-step3.png" alt="查看是否有服务"></p> <ol start="4"><li>把<code>OracleOraDb11g_home1TNSListener</code>服务的启动类型改成自动，如下图所示</li></ol> <p><img src="/services-step4.png" alt="服务的启动类型改成自动"></p> <h3 id="创建oracle数据库"><a href="#创建oracle数据库" class="header-anchor">#</a> 创建oracle数据库</h3> <ol><li><p>选择【开始】--&gt;【Oracle - OraDb11g_home1】--&gt;【配置和移植工具】--&gt;【Database Configuration Assistant】</p></li> <li><p>开始创建数据库，如下图所示</p></li></ol> <p><img src="/oracle-create1.png" alt="开始创建数据库"> <img src="/oracle-create2.png" alt="开始创建数据库"></p> <ol start="3"><li><p>在数据库标识步骤中的全局数据库名必须为（IOTIMC），且必须大写</p></li> <li><p>在数据库身份证明中选择所有账户使用统一管理口令，即密码（密码统一：imcsoft.12345）</p></li></ol> <p><img src="/oracle-create4.png" alt="在数据库身份证明中选择所有账户使用统一管理口令"></p> <ol start="5"><li><p>步骤6、7、8直接下一步</p></li> <li><p>在初始化参数的内存项中选择默认典型类型即可，如下图所示</p></li></ol> <p><img src="/oracle-create9.png" alt="在初始化参数的内存项中选择默认典型类型即可"></p> <ol start="7"><li>在初始化参数的字符集项中必须选择使用Unicode(AL32UTF8)模式，注：此项必须选择正确，如下图所示</li></ol> <p><img src="/oracle-create10.png" alt="在初始化参数的字符集项中必须选择使用Unicode"> <img src="/oracle-create11.png" alt="数据库存储"></p> <ol start="8"><li>在创建选项中点击完成即开始创建，如下图所示</li></ol> <p><img src="/oracle-create12.png" alt="在创建选项中点击完成即开始创建"> <img src="/oracle-create13.png" alt="确认开始创建数据库"></p> <ol start="9"><li>开始安装，等待安装完成，如下图所示</li></ol> <p><img src="/oracle-create14.png" alt="等待安装完成"></p> <ol start="10"><li>在安装过程中会有个提示，点击【忽略】即可，如下图所示</li></ol> <p><img src="/oracle-create15.png" alt="点击【忽略】即可"></p> <ol start="11"><li>在下一个步骤中也点击忽略即可，如下图所示</li></ol> <p><img src="/oracle-create16.png" alt="点击【忽略】即可"></p> <ol start="12"><li><p>安装完成，点击退出按钮即可</p></li> <li><p>打开系统服务，把其它服务都停止，启动类型都改成手动，只剩下以下两个服务并配置成自动即可，如下所示</p></li></ol> <blockquote><p>OracleOraDb11g_home1TNSListener<br>
OracleServcieIOTIMC</p></blockquote> <p>至此数据库已安装完成。</p> <h3 id="验证安装"><a href="#验证安装" class="header-anchor">#</a> 验证安装</h3> <blockquote><p>SQLPlus验证</p></blockquote> <p>在命令行Dos下依次输入</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">set</span> oracle_sid <span class="token operator">=</span> IOTIMC

sqlplus <span class="token string">&quot;/ as sysdba&quot;</span>

<span class="token keyword">select</span> name from <span class="token function">v</span><span class="token variable">$database</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/SQLPlus.png" alt="SQLPlus验证">
如上图所示，没有错误信息，表示验证成功！</p> <blockquote><p>SQLDeveloper工具验证</p></blockquote> <ol><li><p>网上下载安装SQLDeveloper工具，之后打开SQLDevelpor工具，点击添加连接按钮弹出连接框</p></li> <li><p>在连接框中输入连接信息，如下图所示</p></li></ol> <p><img src="/SQLDeveloper1.png" alt="SQLDeveloper工具验证"></p> <ol start="3"><li><p>输入信息完成后，点击test按钮，查看以上Status:状态如何，如果是Success状态则说明连接成功</p></li> <li><p>创建用户脚本.sql</p></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>-- ioticore
--***********************创建表空间***************************
CREATE SMALLFILE TABLESPACE IOTICORE DATAFILE <span class="token string">'IOTICORE.dbf'</span> SIZE 1M AUTOEXTEND ON NEXT 1M MAXSIZE UNLIMITED LOGGING EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO<span class="token punctuation">;</span>

-- ***********************创建用户***************************
-- <span class="token environment constant">USER</span> SQL
CREATE <span class="token environment constant">USER</span> IOTICORE IDENTIFIED BY <span class="token string">&quot;imcsoft.12345&quot;</span> 
DEFAULT TABLESPACE IOTICORE
TEMPORARY TABLESPACE TEMP<span class="token punctuation">;</span>

-- ***********************分配角色***************************
GRANT <span class="token string">&quot;DBA&quot;</span> TO IOTICORE<span class="token punctuation">;</span>
GRANT <span class="token string">&quot;CONNECT&quot;</span> TO IOTICORE<span class="token punctuation">;</span>
GRANT <span class="token string">&quot;RESOURCE&quot;</span> TO IOTICORE<span class="token punctuation">;</span>
ALTER <span class="token environment constant">USER</span> IOTICORE DEFAULT ROLE <span class="token string">&quot;DBA&quot;</span>,<span class="token string">&quot;CONNECT&quot;</span>,<span class="token string">&quot;RESOURCE&quot;</span><span class="token punctuation">;</span>
GRANT UNLIMITED TABLESPACE TO IOTICORE<span class="token punctuation">;</span>

EXIT<span class="token punctuation">;</span>
</code></pre></div><h3 id="安防平台系统程序部署"><a href="#安防平台系统程序部署" class="header-anchor">#</a> 安防平台系统程序部署</h3> <p>以下以部署新疆乌鲁木齐安防平台测试服务器说明</p> <blockquote><p>安防数据库初始化</p></blockquote> <ol><li>将现场数据库数据导出，首先进入现场数据库处理空表问题，执行以下脚本</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>--由于oracle10是默认不导出空表,所以需修改它各表的配置,让它设置成非空

<span class="token keyword">select</span> <span class="token string">'alter table '</span> <span class="token operator">||</span> owner <span class="token operator">||</span>  <span class="token string">'.'</span> <span class="token operator">||</span>table_name<span class="token operator">||</span><span class="token string">' allocate extent;'</span> from all_tables where owner like <span class="token string">'IOT%'</span>
</code></pre></div><ol start="2"><li>处理空表之后将数据全部导出到E盘备份目录下（也可导出到其他地方，改动下路径即可），打开DOS命令执行以下命令，之后耐心等待</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>exp ioticore/imcsoft.12345 <span class="token assign-left variable">file</span><span class="token operator">=</span>E:/iotimc/backup/xj201910301530.dmp <span class="token assign-left variable">full</span><span class="token operator">=</span>y
</code></pre></div><ol start="3"><li>拿到现场数据之后，导入到你要搭建的测试服务器中，先打开创建好的oracle IOTIMC数据库，执行以下脚本</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>--执行如下脚本,然后复制查询结果执行

<span class="token keyword">select</span> <span class="token string">'drop table '</span> <span class="token operator">||</span> table_name <span class="token operator">||</span> <span class="token string">';'</span> from all_tables where owner <span class="token operator">=</span> <span class="token string">'IOTICORE'</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>打开DOS命令执行以下命令，命令中的路径为你在现场所拿到的现场数据dmp，如果不相同请修改，执行之后请耐心等待即可</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>imp ioticore/imcsoft.12345 <span class="token assign-left variable">file</span><span class="token operator">=</span>E:/iotimc/backup/xj201910301530.dmp <span class="token assign-left variable">full</span><span class="token operator">=</span>y <span class="token assign-left variable">ignore</span><span class="token operator">=</span>Y
</code></pre></div><blockquote><p>安防源码程序部署</p></blockquote> <ol><li><p>把部署程序IOTIMCSoft复制到D盘根目录</p></li> <li><p>运行D:\IOTIMCSoft\virgo\InstallVirgo.bat文件</p></li> <li><p>服务中将会多IOTIMC Service Application一个（主服务）</p></li> <li><p>运行D:\IOTIMCSoft\virgo-client\InstallVirgo.bat文件</p></li> <li><p>服务中将会多IOTIMC Client Service Application一个（分布式1），至于其他分布式服务也是如此操作</p></li></ol> <p>6、启动主服务IOTIMC Service Application，启动服务改为自动</p> <p>7、进入D:\IOTIMCSoft\virgo\wrapper\logs\wrapper.log，找到注册信息
（DBA9DC590DE2317E881B8558A7191343.V2.0）填写注册申请表，等待注册key</p> <blockquote><p>修改安防系统配置文件</p></blockquote> <p>用记事本或者notepad++ 打开<code>D:\IOTIMCSoft\virgo\configuration\ioticore-config.xml</code></p> <p>将里面的ip全部改成你准备部署的电脑的ip即可</p> <p>分布式服务下的<code>ioticore-config.xml</code>也是同样修改</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iotimc</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mq</span> <span class="token attr-name">mqname</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>192.168.11.27.server<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>address</span><span class="token punctuation">&gt;</span></span>192.168.11.27<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>address</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>remote</span> <span class="token attr-name">state</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>server<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delegate</span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>9100<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rmi</span> <span class="token attr-name">ip</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>192.168.11.27<span class="token punctuation">&quot;</span></span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>9111<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>remote</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>datasources</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>datasource</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>driver</span><span class="token punctuation">&gt;</span></span>oracle.jdbc.OracleDriver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>driver</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>driverUrl</span><span class="token punctuation">&gt;</span></span>jdbc:oracle:thin:@192.168.11.27:1521:IOTIMC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>driverUrl</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>user</span><span class="token punctuation">&gt;</span></span>ioticore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>user</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>imcsoft.12345<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>datasource</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 提供客户端ioticore数据源 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>datasource</span> <span class="token attr-name">jndiName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ioticore<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ioticore<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>driver</span><span class="token punctuation">&gt;</span></span>oracle.jdbc.OracleDriver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>driver</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>driverUrl</span><span class="token punctuation">&gt;</span></span>jdbc:oracle:thin:@192.168.11.27:1521:IOTIMC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>driverUrl</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>user</span><span class="token punctuation">&gt;</span></span>ioticore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>user</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>imcsoft.12345<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>datasource</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>datasources</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>log</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>INFO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>defaultFile<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>defaultConsole<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>log</span><span class="token punctuation">&gt;</span></span>
	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iotimc</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>拿到公司发给的key文件之后重命名为<code>reg.key</code>，之后覆盖掉<code>D:\IOTIMCSoft\virgo\configuration</code>目录下的<code>reg.key</code>文件即可更新key。</p> <p>至此，系统部署配置文件已完成，更新注册key；重启服务；即可运行系统。</p> <h3 id="平时开发测试"><a href="#平时开发测试" class="header-anchor">#</a> 平时开发测试</h3> <blockquote><p>用webstorm开发</p></blockquote> <p>欲了解更多信息，请百度</p> <p><img src="/debug-webstorm.png" alt="webstorm nodejs调试"></p> <blockquote><p>用vscode开发</p></blockquote> <p>欲了解更多信息，请访问: <a href="https://go.microsoft.com/fwlink/?linkid=830387" target="_blank" rel="noopener noreferrer">https://go.microsoft.com/fwlink/?linkid=830387<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-json5 extra-class"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token comment">// 使用 IntelliSense 了解相关属性。 </span>
    <span class="token comment">// 悬停以查看现有属性的描述。</span>
    <span class="token comment">// </span><span class="token property unquoted">欲了解更多信息，请访问</span><span class="token operator">:</span> <span class="token property unquoted">https</span><span class="token operator">:</span><span class="token comment">//go.microsoft.com/fwlink/?linkid=830387</span>
    <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;configurations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;launch&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hardware&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;cwd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;C:\\Users\\iotimc\\Desktop\\iotimc\\iiw.safe\\iiw.safe.hardware&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;program&quot;</span><span class="token operator">:</span> <span class="token string">&quot;C:\\Users\\iotimc\\Desktop\\iotimc\\iiwlib\\server.js&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;request&quot;</span><span class="token operator">:</span> <span class="token string">&quot;launch&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hardware.list&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;cwd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;C:\\Users\\iotimc\\Desktop\\iotimc\\iiw.safe\\iiw.safe.hardware\\modules\\iiw.safe.hardware.list&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;program&quot;</span><span class="token operator">:</span> <span class="token string">&quot;C:\\Users\\iotimc\\Desktop\\iotimc\\iiwlib\\server.js&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2019-5-21 3:09:05 ├F10: PM┤</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/iotimc/project/applet.html">
        小程序
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/iotimc/assets/js/app.bfdb41ac.js" defer></script><script src="/iotimc/assets/js/2.00b9de49.js" defer></script><script src="/iotimc/assets/js/28.1da70d04.js" defer></script>
  </body>
</html>
