(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{354:function(e,t,l){"use strict";l.r(t);var a=l(12),_=Object(a.a)({},(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[l("h1",{attrs:{id:"脚本"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#脚本"}},[e._v("#")]),e._v(" 脚本")]),e._v(" "),l("h2",{attrs:{id:"安防数据库初始化"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#安防数据库初始化"}},[e._v("#")]),e._v(" 安防数据库初始化")]),e._v(" "),l("p",[e._v("一、处理空表问题")]),e._v(" "),l("p",[e._v("--由于oracle10是默认不导出空表，所以需修改它各表的配置，让它设置成非空")]),e._v(" "),l("p",[e._v("select 'alter table ' || owner ||  '.' ||table_name||' allocate extent;' from all_tables where owner like 'IOT%'")]),e._v(" "),l("p",[e._v("二、导出数据库")]),e._v(" "),l("p",[e._v("exp ioticore/imcsoft.12345 file=E:/iotimc/backup/gx201910301640.dmp full=y")]),e._v(" "),l("p",[e._v("三、执行如下脚本，然后复制查询结果执行")]),e._v(" "),l("p",[e._v("select 'drop table ' || table_name || ';' from all_tables where owner = 'IOTICORE';")]),e._v(" "),l("p",[e._v("四、导入数据库")]),e._v(" "),l("p",[e._v("imp ioticore/imcsoft.12345 file=E:/iotimc/backup/xj201910301530.dmp full=y ignore=Y")]),e._v(" "),l("h2",{attrs:{id:"添加业务权限"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#添加业务权限"}},[e._v("#")]),e._v(" 添加业务权限")]),e._v(" "),l("p",[e._v("查找表"),l("code",[e._v("symenu")]),e._v("过滤"),l("code",[e._v("type = 'role'")]),l("br"),e._v("\n然后 在字段"),l("code",[e._v("code")]),e._v("最大的基础上往上加多一条数据")]),e._v(" "),l("p",[e._v("Insert into SYMENU (ID,CODE,PARENTID,NAME,LEVELS,ICON,ALIAS,URL,METHOD,TYPE,STATUS,PAGE,CREUSER,CREOU,CRETIME,MODOU,MODUSER,MODTIME,SYS,COLOR,NOTES) values ('EDD3742CDE564CB79D78D6AB553A7F48','005000010306','595543FC55164C7389247876ED35A25F','消息通知发布权限',2,null,null,'messageSend',null,'role','P',null,'DE64C89F78E64260B450A69DF64ADEC3','00000000000000000000000000000000',to_date('31-8月 -16','DD-MON-RR'),null,null,null,null,null,'是否有权限发布消息通知');")]),e._v(" "),l("p",[e._v("其中"),l("code",[e._v("messageSend")]),e._v("为权限标识，用于 接口获取某个固定权限所用到的参数值")]),e._v(" "),l("p",[e._v("之后请求接口："),l("code",[e._v("security/check/check.do?action=getSpecialrole")]),l("br"),e._v("\n传递的参数"),l("code",[e._v("filter: {url: ['权限标识']}")])])])}),[],!1,null,null,null);t.default=_.exports}}]);