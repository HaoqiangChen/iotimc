<div class="iiw-system-page-container">
    <div class="stretch ui-layout-column" ui-layout="{ flow: 'column'}" options="{dividerSize:'0'}">
        <div class="ui-layout-row" ui-layout="{ flow: 'row'}" options="{dividerSize:'0'}">
            <div class="ui-layout-container iiw-system-module-title-container" size="50px" ui-layout-container>
                <h2 class="page-title">{{title}}</h2>
            </div>
            <div class="ui-layout-container" ui-layout-container>
                <div class="layout-full" ui-view style="overflow: hidden;">
                    <div class="ui-layout-row system-naire-page-content" ui-layout="{ flow: 'row'}"
                         options="{dividerSize:'0'}">
                        <div class="ui-layout-container" ui-layout-container style="overflow:hidden;">
                            <div class="layout-full system-naire-container"
                                 style="position: relative; display:inline-block;">
                                <div class="system-wjmenu-container">
                                    <div class="wjmenu-header">
                                        <em>#</em>目录<a class="wjmenu-cog" title="目录设置" ng-click="directory()"><i
                                            class="fa fa-cog fa-fw"></i></a>
                                    </div>
                                    <div class="wjmenu-content" i-scroll2>
                                        <ul class="contents-list">
                                            <li class="contents-item"
                                                ng-repeat="(index, group) in contentsList track by index"
                                                ng-click="menuClick($event, group)">
                                                <div class="item-box">
                                                    <em>{{group.type}}</em>
                                                    <span class="name">{{group.name}}</span>
                                                    <span class="label label-info ng-binding">{{group.secondary.length}}</span>
                                                    <i class="arrow fa"
                                                       ng-class="group.hasFold ? 'fa-angle-down' : 'fa-angle-left'"></i>
                                                </div>
                                                <ol class="contents-fold">
                                                    <li class="title"
                                                        ng-repeat="(index, item) in group.secondary track by index"
                                                        ng-click="catalogClick($event, item)" ng-class="{true: 'active', false: ''}[item.active]">{{item.title}}
                                                    </li>
                                                </ol>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="iiw-system-question-container">
                                    <div class="question-wrapper">
                                        <h3 class="question-none" ng-if="!questionList.length" style="text-align: center">
                                            请点击左边目录，在对应目录下添加问题！
                                        </h3>
                                        <div class="question-list">
                                            <fieldset class='fieldset'
                                                      ng-repeat="(qnumber, question) in questionList track by qnumber">
                                                <div class='field' topic='question.idx' type='question.type' ng-click="editQ(questionList, $index)">
                                                    <div ng-if="question.qpremise" class='field-premise'>
                                                        {{question.qpremise}}
                                                    </div>

                                                    <div class='field-label' ng-bind-html="'(单选题) ' + question.idx + '、' + question.name | ngHtml" ng-if="question.type === '1'"></div>
                                                    <div class='field-label' ng-bind-html="'(多选题) ' + question.idx + '、' + question.name | ngHtml" ng-if="question.type === '2'"></div>
                                                    <div class='field-label' ng-bind-html="question.idx + '、' + question.name | ngHtml" ng-if="question.type === '3'"></div>
                                                    <div class='field-label' ng-bind-html="'(下拉选择题) ' + question.idx + '、' + question.name | ngHtml" ng-if="question.type === '4'"></div>

                                                    <div ng-if="question.qtip" class='field-tip'>{{question.qtip}}</div>

                                                    <!--    题目类型一：单选题-->
                                                    <div class="field-controlgroup" ng-if="question.type === '1'">
                                                        <div class="field-radio"
                                                             ng-repeat="(idx, radio) in question.option track by idx">
                                                            <div class="radio-container">
                                                                <i class="fa"
                                                                   ng-class="{'fa-circle-o': !radio.isChecked, 'fa-check-circle-o': radio.isChecked}"></i>
                                                                <label>{{radio.label}}<sub class="option-jump" ng-if="radio.jumpto">(跳转到第{{radio.jumpto}}题)</sub></label>
                                                                <div class="label-desc" ng-if="radio.isdesc === 1">({{radio.descr}})</div>
                                                            </div>
                                                            <div class="field-child"
                                                                 ng-if="radio.child">
                                                                <div class="achild-list"
                                                                     ng-repeat="(cindex, child) in radio.qchild track by cindex">
                                                                    <div class="field field-qchild">
                                                                        <div class='field-label' ng-if="child.name">{{child.name}}</div>
                                                                        <div ng-if="child.qtip" class='field-tip'>
                                                                            {{child.qtip}}
                                                                        </div>

                                                                        <!-- 单选子问题-->
                                                                        <div class="field-controlgroup"
                                                                             ng-if="child.type === '1'">
                                                                            <div class="field-radio"
                                                                                 ng-repeat="(fk, radio) in child.option track by fk">
                                                                                <div class="radio-container">
                                                                                    <i class="fa"
                                                                                       ng-class="{'fa-circle-o': !radio.isChecked, 'fa-check-circle-o': radio.isChecked}"></i>
                                                                                    <label>{{radio.label}}</label>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <!-- 多选子问题-->
                                                                        <div class="field-controlgroup"
                                                                             ng-if="child.type === '2'">
                                                                            <div class="field-checkbox"
                                                                                 ng-repeat="(fk, checkbox) in child.option track by fk">
                                                                                <div class="checkbox-container">
                                                                                    <i class="fa"
                                                                                       ng-class="{'fa-square-o': !checkbox.isChecked, 'fa-check-square-o': checkbox.isChecked}"></i>
                                                                                    <label>{{checkbox.label}}</label>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <!-- 填空子问题-->
                                                                        <div class="field-input"
                                                                             ng-if="child.type === '3'">
                                                                                        <span ng-repeat="(index, input) in child.option track by index">
                                                                                            {{input.prefix}}
                                                                                            <!-- 多行文本框 -->
                                                                                            <div class="field-textarea"
                                                                                                 ng-if="input.type === '0'">
                                                                                                <span class="input-text">{{input.value}}</span>
                                                                                            </div>
                                                                                            <!-- 属性验证，单行文本框，6-时间选择控件 -->
                                                                                            <div ng-if="input.type === '6'"
                                                                                                 class="special">
                                                                                                <i class="fa fa-calendar fa-fw"></i>
                                                                                                <input type="text"
                                                                                                       ng-model="input.value"
                                                                                                       disabled="disabled">
                                                                                            </div>
                                                                                            <!-- 属性验证，单行文本框，1-无属性 2-整数 3-百分数 -->
                                                                                            <span ng-if="input.type !== '0' && input.type !== '6'"
                                                                                                  class="input-text">{{input.value}}</span>
                                                                                            {{input.suffix}}
                                                                                        </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!--    题目类型二：多选题-->
                                                    <div class="field-controlgroup" ng-if="question.type === '2'">
                                                        <div class="field-checkbox"
                                                             ng-repeat="(idx, checkbox) in question.option track by idx">
                                                            <div class="checkbox-container">
                                                                <i class="fa"
                                                                   ng-class="{'fa-square-o': !checkbox.isChecked, 'fa-check-square-o': checkbox.isChecked}"></i>
                                                                <label>{{checkbox.label}}<sub class="option-jump" ng-if="radio.jumpto">(跳转到第{{radio.jumpto}}题)</sub></label>
                                                                <div class="label-desc" ng-if="checkbox.isdesc === 1">({{checkbox.descr}})</div>
                                                            </div>
                                                            <div class="field-child"
                                                                 ng-if="checkbox.child">
                                                                <div class="achild-list"
                                                                     ng-repeat="(cindex, child) in checkbox.qchild track by cindex">
                                                                    <div class="field field-qchild">
                                                                        <div class='field-label'>{{child.name}}</div>
                                                                        <div ng-if="child.qtip" class='field-tip'>
                                                                            {{child.qtip}}
                                                                        </div>

                                                                        <!-- 单选子问题-->
                                                                        <div class="field-controlgroup"
                                                                             ng-if="child.type === '1'">
                                                                            <div class="field-radio"
                                                                                 ng-repeat="(fk, radio) in child.option track by fk">
                                                                                <div class="radio-container">
                                                                                    <i class="fa"
                                                                                       ng-class="{'fa-circle-o': !radio.isChecked, 'fa-check-circle-o': radio.isChecked}"></i>
                                                                                    <label>{{radio.label}}</label>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <!-- 多选子问题-->
                                                                        <div class="field-controlgroup"
                                                                             ng-if="child.type === '2'">
                                                                            <div class="field-checkbox"
                                                                                 ng-repeat="(fk, checkbox) in child.option track by fk">
                                                                                <div class="checkbox-container">
                                                                                    <i class="fa"
                                                                                       ng-class="{'fa-square-o': !checkbox.isChecked, 'fa-check-square-o': checkbox.isChecked}"></i>
                                                                                    <label>{{checkbox.label}}</label>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <!-- 填空子问题-->
                                                                        <div class="field-input"
                                                                             ng-if="child.type === '3'">
                                                                                        <span ng-repeat="(index, input) in child.option track by index">
                                                                                            {{input.prefix}}
                                                                                            <!-- 多行文本框 -->
                                                                                            <div class="field-textarea"
                                                                                                 ng-if="input.type === '0'">
                                                                                                <span class="input-text">{{input.value}}</span>
                                                                                            </div>
                                                                                            <!-- 属性验证，单行文本框，6-时间选择控件 -->
                                                                                            <div ng-if="input.type === '6'"
                                                                                                 class="special">
                                                                                                <i class="fa fa-calendar fa-fw"></i>
                                                                                                <input type="text"
                                                                                                       ng-model="input.value"
                                                                                                       disabled="disabled">
                                                                                            </div>
                                                                                            <!-- 属性验证，单行文本框，1-无属性 2-整数 3-百分数 -->
                                                                                            <span ng-if="input.type !== '0' && input.type !== '6'"
                                                                                                  class="input-text">{{input.value}}</span>
                                                                                            {{input.suffix}}
                                                                                        </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!--    题目类型三：填空题-->
                                                    <div class="field-input" ng-if="question.type === '3'">
                                                            <span ng-repeat="(index, input) in question.option track by index">
                                                                {{input.prefix}}
                                                                <!-- 多行文本框 -->
                                                                <div class="field-textarea" ng-if="input.type === '0'">
                                                                    <span class="input-text">{{input.value}}</span>
                                                                </div>
                                                                <!-- 属性验证，单行文本框，6-时间选择控件 -->
                                                                <div ng-if="input.type === '6'" class="special">
                                                                    <i class="fa fa-calendar fa-fw"></i>
                                                                    <input type="text" ng-model="input.value"
                                                                           disabled="disabled">
                                                                </div>
                                                                <!-- 属性验证，单行文本框，1-无属性 2-整数 3-百分数 -->
                                                                <span ng-if="input.type !== '0' && input.type !== '6'"
                                                                      class="input-text">{{input.value}}</span>
                                                                <sub ng-if="input.descr">({{input.descr}})</sub>
                                                                {{input.suffix}}
                                                                <div class="field-child" ng-if="input.child">
                                                                    <div class="achild-list"
                                                                         ng-repeat="(cindex, child) in input.qchild track by cindex">
                                                                        <div class="field field-qchild">
                                                                            <div class='field-label'>{{child.name}}</div>
                                                                            <div ng-if="child.qtip" class='field-tip'>{{child.qtip}}</div>

                                                                            <!-- 单选子问题-->
                                                                            <div class="field-controlgroup"
                                                                                 ng-if="child.type === '1'">
                                                                                <div class="field-radio"
                                                                                     ng-repeat="(fk, radio) in child.option track by fk">
                                                                                    <div class="radio-container">
                                                                                        <i class="fa"
                                                                                           ng-class="{'fa-circle-o': !radio.isChecked, 'fa-check-circle-o': radio.isChecked}"></i>
                                                                                        <label>{{radio.label}}</label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <!-- 多选子问题-->
                                                                            <div class="field-controlgroup"
                                                                                 ng-if="child.type === '2'">
                                                                                <div class="field-checkbox"
                                                                                     ng-repeat="(fk, checkbox) in child.option track by fk">
                                                                                    <div class="checkbox-container">
                                                                                        <i class="fa"
                                                                                           ng-class="{'fa-square-o': !checkbox.isChecked, 'fa-check-square-o': checkbox.isChecked}"></i>
                                                                                        <label>{{checkbox.label}}</label>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <!-- 填空子问题-->
                                                                            <div class="field-input"
                                                                                 ng-if="child.type === '3'">
                                                                                <span ng-repeat="(index, input) in child.option track by index">
                                                                                    {{input.prefix}}
                                                                                    <!-- 多行文本框 -->
                                                                                    <div class="field-textarea"
                                                                                         ng-if="input.type === '0'">
                                                                                        <span class="input-text">{{input.value}}</span>
                                                                                    </div>
                                                                                    <!-- 属性验证，单行文本框，6-时间选择控件 -->
                                                                                    <div ng-if="input.type === '6'"
                                                                                         class="special">
                                                                                        <i class="fa fa-calendar fa-fw"></i>
                                                                                        <input type="text"
                                                                                               ng-model="input.value"
                                                                                               disabled="disabled">
                                                                                    </div>
                                                                                    <!-- 属性验证，单行文本框，1-无属性 2-整数 3-百分数 -->
                                                                                    <span ng-if="input.type !== '0' && input.type !== '6'"
                                                                                          class="input-text">{{input.value}}</span>
                                                                                    {{input.suffix}}
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </span>
                                                    </div>

                                                    <!--    题目类型四：下拉题-->
                                                    <div class="field-select" ng-if="question.type === '4'">
                                                        下拉选项:<span class="text" ng-repeat="option in question.option">{{option.label}}</span>
                                                    </div>

                                                    <div class="field-jump" ng-if="question.jumpway">*此题设置了跳题逻辑
                                                        <span ng-if="question.anyjump" style="color: #f60;">(跳转到第{{question.anyjump}}题)</span>
                                                    </div>

                                                </div>
                                                <div class="set clearfix" ng-show="!question.editing">
                                                    <div class="col-md-4">
                                                        <div class="setLeft">
                                                            <a ng-click="">在此题后插入新题</a>
                                                            <div class="question-insertQ">
                                                                <em></em>
                                                                <span></span>
                                                                <div class="insertQ-type">
                                                                    <button class="btn btn-sm btn-primary" ng-click="addQ($index, 1, question)">单选题</button>
                                                                    <button class="btn btn-sm btn-primary" ng-click="addQ($index, 2, question)">多选题</button>
                                                                    <button class="btn btn-sm btn-primary" ng-click="addQ($index, 3, question)">填空题</button>
                                                                    <button class="btn btn-sm btn-primary" ng-click="addQ($index, 4, question)">下拉选择题</button>
                                                                </div>
                                                                <!-- <div class="tip"><b>提示：</b>如需添加其他题型，请联系开发人员进行开发。</div> -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <a class="btn btn-success" ng-click="editQ(questionList, $index)"><i class="fa fa-edit fa-fw"></i>编辑</a>
                                                        <a class="btn btn-primary" ng-click="copy($index)"><i class="fa fa-copy fa-fw"></i>复制</a>
                                                        <a class="btn btn-danger" ng-click="delQ(question, $index)"><i class="fa fa-trash-o fa-fw"></i>删除</a>
                                                        <!-- <a class="btn btn-info" ng-click="moveUp(questionList, $index, 'question')"><i class="fa fa-arrow-up fa-fw"></i>上移</a>
                                                        <a class="btn btn-info" ng-click="moveDown(questionList, $index, 'question')"><i class="fa fa-arrow-down fa-fw"></i>下移</a> -->
                                                    </div>
                                                </div>
                                                <div ng-if="question.editing">
                                                    <div class="question-set">
                                                        <div class="question-triangle"></div>
                                                        <input type="text" class="form-control" ng-model="question.code" placeholder="题目编号，该空必填" style="margin: 10px 0;border: 1px solid #f00;">
                                                        <kind-editor ng-model="question.name"></kind-editor>
                                                        <input type="text" class="form-control" ng-model="question.qtip" placeholder="题目提示说明" style="margin: 10px 0;border: 1px solid #eee;">
                                                        <div ng-if="question.type === '1'">
                                                            <div class="table-responsive question-table">
                                                                <table class="table table-responsive">
                                                                    <thead>
                                                                    <tr>
                                                                        <th>选项文字</th>
                                                                        <th>选项提示</th>
                                                                         <th>选项问题</th>
                                                                        <th>上移下移</th>
                                                                    </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                    <tr ng-repeat="row in question.option">
                                                                        <td class="label-box">
                                                                            <input type="text" class="choicetxt" ng-model="row.label" placeholder="选项{{$index+1}}, 该空必填">
                                                                            <i class="fa fa-plus-circle fa-fw" ng-click="addOption(question.option, $index)" title="在此选项下面插入一个新的选项"></i>
                                                                            <i class="fa fa-minus-circle fa-fw" ng-click="del(question.option, $index, 'option')" title="删除当前选项（最少保留2个选项）"></i>
                                                                        </td>
                                                                        <td>
                                                                            <form class="form-inline">
                                                                                <div class="form-group" ng-click="row.isdesc ? row.isdesc = 0 : row.isdesc = 1">
                                                                                    <i class="fa"
                                                                                       ng-class="{'fa-square-o': !row.isdesc, 'fa-check-square-o': row.isdesc}"></i>
                                                                                    <label style="margin-right: 10px">提示</label>
                                                                                </div>
                                                                                <input ng-if="row.isdesc" class="form-group" type="text" ng-model="row.descr" class="form-control">
                                                                            </form>
                                                                        </td>
                                                                        <td>
                                                                            <i class="fa fa-fw" ng-click="row.child = !row.child"
                                                                               ng-class="{'fa-square-o': !row.child, 'fa-check-square-o': row.child}"></i>
                                                                               <button ng-if="row.child" class="btn btn-info" data-backdrop="false" data-target="#questionModal" data-toggle="modal" ng-click="setChild(question, $index)">子问题</button>
                                                                        </td>
                                                                        <td>
                                                                            <i class="fa fa-arrow-circle-up fa-fw" ng-click="moveUp(question.option, $index, 'option')" title="将当前选项上移一个位置"></i>
                                                                            <i class="fa fa-arrow-circle-down fa-fw" ng-click="moveDown(question.option, $index, 'option')" title="将当前选项下移一个位置"></i>
                                                                        </td>
                                                                    </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                            <div class="question-option clearfix">
                                                                <div class="col-md-6">
                                                                    <a ng-click="addOption(question.option, question.option.length - 1)"><i class="fa fa-plus-square-o"></i>添加选项</a>
                                                                    <a ng-click="setQ($index)" data-backdrop="false" data-target="#optionModal" data-toggle="modal" title="批量添加选项">
                                                                        <i class="fa fa-object-ungroup"></i>批量增加
                                                                    </a>
                                                                </div>
                                                                <div class="col-md-6"></div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="question.type === '2'">
                                                            <div class="table-responsive question-table">
                                                                <table class="table table-responsive">
                                                                    <thead>
                                                                    <tr>
                                                                        <th>选项文字</th>
                                                                        <th>选项提示</th>
                                                                        <th>选项问题</th>
                                                                        <th>上移下移</th>
                                                                    </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                    <tr ng-repeat="row in question.option">
                                                                        <td class="label-box">
                                                                            <input type="text" class="choicetxt" ng-model="row.label" placeholder="选项{{$index+1}}, 该空必填">
                                                                            <i class="fa fa-plus-circle fa-fw" ng-click="addOption(question.option, $index)" title="在此选项下面插入一个新的选项"></i>
                                                                            <i class="fa fa-minus-circle fa-fw" ng-click="del(question.option, $index, 'option')" title="删除当前选项（最少保留2个选项）"></i>
                                                                        </td>
                                                                        <td>
                                                                            <form class="form-inline">
                                                                                <div class="form-group" ng-click="row.isdesc ? row.isdesc = 0 : row.isdesc = 1">
                                                                                    <i class="fa"
                                                                                       ng-class="{'fa-square-o': !row.isdesc, 'fa-check-square-o': row.isdesc}"></i>
                                                                                    <label style="margin-right: 10px">提示</label>
                                                                                </div>
                                                                                <input ng-if="row.isdesc" class="form-group" type="text" ng-model="row.descr" class="form-control">
                                                                            </form>
                                                                        </td>
                                                                        <td>
                                                                            <i class="fa fa-fw" ng-click="row.child = !row.child"
                                                                               ng-class="{'fa-square-o': !row.child, 'fa-check-square-o': row.child}"></i>
                                                                            <button ng-if="row.child" class="btn btn-info" data-backdrop="false" data-target="#questionModal" data-toggle="modal" ng-click="setChild(question, $index)">子问题</button>
                                                                        </td>
                                                                        <td>
                                                                            <i class="fa fa-arrow-circle-up fa-fw" ng-click="moveUp(question.option, $index, 'option')" title="将当前选项上移一个位置"></i>
                                                                            <i class="fa fa-arrow-circle-down fa-fw" ng-click="moveDown(question.option, $index, 'option')" title="将当前选项下移一个位置"></i>
                                                                        </td>
                                                                    </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                            <div class="question-option clearfix">
                                                                <div class="col-md-6">
                                                                    <a ng-click="addOption(question.option, question.option.length - 1)"><i class="fa fa-plus-square-o"></i>添加选项</a>
                                                                    <a ng-click="setQ($index)" data-backdrop="false" data-target="#optionModal" data-toggle="modal" title="批量添加选项">
                                                                        <i class="fa fa-object-ungroup"></i>批量增加
                                                                    </a>
                                                                </div>
                                                                <div class="col-md-6"></div>
                                                            </div>
                                                        </div>
                                                        <div ng-if="question.type === '3'">
                                                            <div class="table-responsive question-table">
                                                                <table class="table table-responsive">
                                                                    <thead>
                                                                    <tr>
                                                                        <th>填空</th>
                                                                        <th>填空类型</th>
                                                                        <th>填空属性</th>
                                                                        <th>选项提示</th>
                                                                        <th>操作</th>
                                                                    </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                    <tr ng-repeat="row in question.option">
                                                                        <td>填空{{$index + 1}}</td>
                                                                        <td>
                                                                            <select ng-model="row.type" class="form-control">
                                                                                <option ng-repeat="(key, type) in inputTypes track by key" value="{{type.type}}">{{type.typename}}</option>
                                                                            </select>
                                                                        </td>
                                                                        <td class="input-attr">
                                                                            <form class="form-inline">
                                                                                <div class="form-group">
                                                                                    <label for="prefix">前缀:</label>
                                                                                    <input type="text" ng-model="row.prefix" class="form-control" id="prefix">
                                                                                </div>
                                                                                <div class="form-group">
                                                                                    <label for="suffix">后缀:</label>
                                                                                    <input type="text" ng-model="row.suffix" class="form-control" id="suffix">
                                                                                </div>
                                                                                <div class="form-group" ng-if="row.type === '0' || row.type === '1'">
                                                                                    <label for="minwords">最小字符:</label>
                                                                                    <input type="number" ng-model="row.minwords" class="form-control" id="minwords">
                                                                                </div>
                                                                                <div class="form-group" ng-if="row.type === '0' || row.type === '1'">
                                                                                    <label for="maxwords">最大字符:</label>
                                                                                    <input type="number" ng-model="row.maxwords" class="form-control" id="maxwords">
                                                                                </div>
                                                                                <div class="form-group" ng-if="row.type === '2' || row.type === '3'">
                                                                                    <label for="maxnumber">最小范围:</label>
                                                                                    <input type="number" ng-model="row.maxnumber" class="form-control" id="maxnumber">
                                                                                </div>
                                                                                <div class="form-group" ng-if="row.type === '2' || row.type === '3'">
                                                                                    <label for="minnumber">最大范围:</label>
                                                                                    <input type="number" ng-model="row.minnumber" class="form-control" id="minnumber">
                                                                                </div>
                                                                                <div class="form-group" ng-if="row.type === '6'">
                                                                                    <label>时间格式:</label>
                                                                                    <select ng-model="row.format" class="form-control">
                                                                                        <option value="1">年</option>
                                                                                        <option value="2">年月</option>
                                                                                        <option value="3">年月日</option>
                                                                                    </select>
                                                                                </div>
                                                                            </form>
                                                                        </td>
                                                                        <td>
                                                                            <form class="form-inline">
                                                                                <div class="form-group" ng-click="row.isdesc ? row.isdesc = 0 : row.isdesc = 1">
                                                                                    <i class="fa"
                                                                                       ng-class="{'fa-square-o': !row.isdesc, 'fa-check-square-o': row.isdesc}"></i>
                                                                                    <label style="margin-right: 10px">提示</label>
                                                                                </div>
                                                                                <input ng-if="row.isdesc" class="form-group" type="text" ng-model="row.descr" class="form-control">
                                                                            </form>
                                                                        </td>
                                                                        <td>
                                                                            <i class="fa fa-plus-circle fa-fw" ng-click="addInput(question.option, $index)" title="在此选项下面插入一个新的选项"></i>
                                                                            <i class="fa fa-minus-circle fa-fw" ng-click="del(question.option, $index, 'input')" title="删除当前选项（最少保留2个选项）"></i>

                                                                            <i class="fa fa-arrow-circle-up fa-fw" ng-click="moveUp(question.option, $index, 'option')" title="将当前选项上移一个位置"></i>
                                                                            <i class="fa fa-arrow-circle-down fa-fw" ng-click="moveDown(question.option, $index, 'option')" title="将当前选项下移一个位置"></i>
                                                                        </td>
                                                                    </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                        </div>
                                                        <div ng-if="question.type === '4'">
                                                            <div class="table-responsive question-table">
                                                                <table class="table table-responsive">
                                                                    <thead>
                                                                    <tr>
                                                                        <th>选项文字</th>
                                                                        <th>上移下移</th>
                                                                    </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                    <tr ng-repeat="row in question.option">
                                                                        <td class="label-box">
                                                                            <input type="text" class="choicetxt" ng-model="row.label" placeholder="选项{{$index+1}}, 该空必填" required>
                                                                            <i class="fa fa-plus-circle fa-fw" ng-click="addOption(question.option, $index)" title="在此选项下面插入一个新的选项"></i>
                                                                            <i class="fa fa-minus-circle fa-fw" ng-click="del(question.option, $index, 'option')" title="删除当前选项（最少保留2个选项）"></i>
                                                                        </td>
                                                                        <td>
                                                                            <i class="fa fa-arrow-circle-up fa-fw" ng-click="moveUp(question.option, $index, 'option')" title="将当前选项上移一个位置"></i>
                                                                            <i class="fa fa-arrow-circle-down fa-fw" ng-click="moveDown(question.option, $index, 'option')" title="将当前选项下移一个位置"></i>
                                                                        </td>
                                                                    </tr>
                                                                    </tbody>
                                                                </table>
                                                            </div>
                                                            <div class="question-option clearfix">
                                                                <div class="col-md-6">
                                                                    <a ng-click="addOption(question.option, question.option.length - 1)"><i class="fa fa-plus-square-o"></i>添加选项</a>
                                                                    <a ng-click="setQ($index)" data-backdrop="false" data-target="#optionModal" data-toggle="modal" title="批量添加选项">
                                                                        <i class="fa fa-object-ungroup"></i>批量增加
                                                                    </a>
                                                                </div>
                                                                <div class="col-md-6"></div>
                                                            </div>
                                                        </div>
                                                        <div class="question-logic">
                                                            <span>逻辑设置：</span>
                                                            <!-- <a ng-click="setQ($index)" ng-if="$index > 0" data-backdrop="false" data-target="#jumpModal" data-toggle="modal" title="当前面题目选中某些选项时才出现此题 ">题目关联</a> -->
                                                            <a ng-click="setJumpQ($index)" data-backdrop="false" data-target="#jumpModal" data-toggle="modal" title="通过配合设置其他题目的“按选项跳题”实现更复杂的跳题逻辑">跳题逻辑</a>
                                                        </div>
                                                        <button class="question-btn" ng-disabled="!question.name || !question.code" ng-click="saveQ(question)">完成编辑</button>
                                                    </div>
                                                </div>
                                            </fieldset>
                                        </div>

<!--                                        <button class="btn btn-info" data-backdrop="false" data-target="#questionModal" data-toggle="modal">子问题</button>-->

                                        <div class="question-add">
                                            <div class="collapse" id="collapseAdd">
                                                <div class="add-option">
                                                    <button class="btn btn-lg btn-primary" ng-click="addQ(questionList.length, 1)">单选题</button>
                                                    <button class="btn btn-lg btn-primary" ng-click="addQ(questionList.length, 2)">多选题</button>
                                                    <button class="btn btn-lg btn-primary" ng-click="addQ(questionList.length, 3)">填空题</button>
                                                    <button class="btn btn-lg btn-primary" ng-click="addQ(questionList.length, 4)">下拉选择题</button>
                                                </div>
                                            </div>
                                            <button class="btn btn-primary btn-add" type="button" data-toggle="collapse" data-target="#collapseAdd" aria-expanded="false" aria-controls="collapseAdd"><i class="fa fa-plus"></i>添加问题</button>
                                        </div>
                                    </div>
                                    <div class="question-footer clearfix" size="60px">
                                        <!-- <button class="btn btn-success col-md-4" ng-click="save()"><i
                                                class="fa fa-check fa-fw"></i>完成编辑
                                        </button> -->
                                        <button class="btn btn-danger col-md-4" ng-click="back()"><i
                                                class="fa fa-mail-reply-all fa-fw"></i>返回
                                        </button>
                                    </div>
                                    <div ng-if="loading.isLoading" class="system-loading-toast" ng-class="loading.className">
                                        <div class="loading-toast">
                                            <i class="loading-icon fa fa-spinner fa-pulse fa-5x fa-fw"></i>
                                            <p class="loading-content">{{loading.content}}...</p>
                                        </div>
                                    </div>
                                </div>

                                <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" class="modal fade" id="optionModal">
                                    <div class="modal-dialog modal-lg">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()"><i class="fa fa-remove"></i></button>
                                                <h4 class="modal-title">批量添加选项</h4>
                                            </div>
                                            <div class="modal-body">
                                                <div class="widget-content">
                                                    <div class="modal-wrapper">
                                                        提示：将每个选项按顺序填写，中间用英文逗号 , 隔开。举例输入 选项一,选项二,选项三
                                                        <textarea class="form-control" rows="5" ng-model="data.batchOptions"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button class="btn btn-danger btn-lg btn-larger" data-dismiss="modal" ng-click="cancel()">取消</button>
                                            <button class="btn btn-primary btn-lg btn-larger" ng-click="saveOption()">保存</button>
                                        </div>
                                    </div>
                                </div>
                                <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" class="modal fade" id="jumpModal">
                                    <div class="modal-dialog modal-lg">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()"><i class="fa fa-remove"></i></button>
                                                <h4 class="modal-title">跳题逻辑</h4>
                                            </div>
                                            <div class="modal-body">
                                                <div class="widget-content">
                                                    <div class="jump-wrapper" style="height: 500px;">
                                                        <div ng-if="question.type === '1' || question.type === '2'">
                                                            <div class="radio" ng-click="setJump(question, 1)">
                                                                <label>
                                                                    <i class="fa" ng-class="{'fa-square-o': question.jumpway !== '1', 'fa-check-square-o': question.jumpway === '1'}"></i>
                                                                    <b>按选项跳题</b>
                                                                </label>
                                                            </div>
                                                            <div class="opjump" ng-if="question.jumpway === '1'">
                                                                <div class="table-responsive question-table">
                                                                    <table class="table table-responsive">
                                                                        <thead>
                                                                        <tr>
                                                                            <th></th>
                                                                            <th>选项</th>
                                                                            <th>跳转到</th>
                                                                        </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                        <tr ng-repeat="row in question.option">
                                                                            <td>选择</td>
                                                                            <td>{{row.label}}</td>
                                                                            <td>
                                                                                <select ng-model="row.jumpto" class="form-control">
                                                                                    <option value="">不跳转，按顺序填写下一题</option>
                                                                                    <option ng-repeat="(idx, question) in jumpQlist track by idx" value="{{question.idx}}">{{question.idx}}、{{question.name | ngFormat}}</option>
                                                                                </select>
                                                                            </td>
                                                                        </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <div class="radio" ng-click="setJump(question, 2)">
                                                                <label>
                                                                    <i class="fa" ng-class="{'fa-square-o': question.jumpway !== '2', 'fa-check-square-o': question.jumpway === '2'}"></i>
                                                                    <b>无条件跳题</b>
                                                                </label>
                                                            </div>
                                                            <div class="anyjump" ng-if="question.jumpway === '2'">
                                                                <div class="form-group clearfix">
                                                                    <label style="padding: 0 20px;">填写此题后跳转到: </label>
                                                                    <select ng-model="question.anyjump" class="form-control anyjump-select">
                                                                        <option value="">请选择要跳转到的题目</option>
                                                                        <option ng-repeat="(idx, question) in jumpQlist track by idx" value="{{question.idx}}">{{question.idx}}、{{question.name | ngFormat}}</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button class="btn btn-danger btn-lg btn-larger" data-dismiss="modal" ng-click="cancel()">取消</button>
                                            <button class="btn btn-primary btn-lg btn-larger" ng-click="saveJumpQ()">保存</button>
                                        </div>
                                    </div>
                                </div>
                                <div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" class="modal fade" id="questionModal">
                                    <div class="modal-dialog modal-lg">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel()"><i class="fa fa-remove"></i></button>
                                                <h4 class="modal-title">选项子问题配置</h4>
                                            </div>
                                            <div class="modal-body">
                                                <div class="widget-content">
                                                    <div class="modal-wrapper" style="height: 500px;overflow: auto;">
                                                        <div class="quesiton-child">
                                                            <h4 class="child-lable">
                                                                当前选项：{{option.label}}
                                                            </h4>
                                                            <div class="child-list">
                                                                <fieldset class='fieldset' ng-repeat="(index, child) in option.qchild track by index">
                                                                    <div class="child-set">
                                                                        <div class="clearfix">
                                                                            <div class="pull-left" style="padding-top: 10px;">选项子问题 {{$index + 1}}</div>
                                                                            <div class="pull-right">
                                                                                <button class="btn btn-danger" ng-click="option.qchild.splice($index, 1)"><i class="fa fa-trash-o fa-fw"></i>删除</button>
                                                                            </div>
                                                                        </div>
                                                                        <input type="text" class="form-control" ng-model="child.name" placeholder="题目，根据需要填写，可不填" style="margin: 10px 0;border: 1px solid #eee;">
                                                                        <input type="text" class="form-control" ng-model="child.qtip" placeholder="问题提示，根据需要填写，可不填" style="margin: 10px 0;border: 1px solid #eee;">
                                                                        <div ng-if="child.type === '1'">
                                                                            <div class="table-responsive question-table">
                                                                                <table class="table table-responsive">
                                                                                    <thead>
                                                                                    <tr>
                                                                                        <th>选项文字</th>
                                                                                        <th>上移下移</th>
                                                                                    </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                    <tr ng-repeat="row in child.option">
                                                                                        <td class="label-box">
                                                                                            <input type="text" class="choicetxt" ng-model="row.label" placeholder="选项{{$index+1}}, 该空必填">
                                                                                            <i class="fa fa-plus-circle fa-fw" ng-click="addOption(child.option, $index)" title="在此选项下面插入一个新的选项"></i>
                                                                                            <i class="fa fa-minus-circle fa-fw" ng-click="del(child.option, $index, 'option')" title="删除当前选项（最少保留2个选项）"></i>
                                                                                        </td>
                                                                                        <td>
                                                                                            <i class="fa fa-arrow-circle-up fa-fw" ng-click="moveUp(child.option, $index, 'option')" title="将当前选项上移一个位置"></i>
                                                                                            <i class="fa fa-arrow-circle-down fa-fw" ng-click="moveDown(child.option, $index, 'option')" title="将当前选项下移一个位置"></i>
                                                                                        </td>
                                                                                    </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>

                                                                        <div ng-if="child.type === '2'">
                                                                            <div class="table-responsive question-table">
                                                                                <table class="table table-responsive">
                                                                                    <thead>
                                                                                    <tr>
                                                                                        <th>选项文字</th>
                                                                                        <th>上移下移</th>
                                                                                    </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                    <tr ng-repeat="row in child.option">
                                                                                        <td class="label-box">
                                                                                            <input type="text" class="choicetxt" ng-model="row.label" placeholder="选项{{$index+1}}, 该空必填">
                                                                                            <i class="fa fa-plus-circle fa-fw" ng-click="addOption(child.option, $index)" title="在此选项下面插入一个新的选项"></i>
                                                                                            <i class="fa fa-minus-circle fa-fw" ng-click="del(child.option, $index, 'option')" title="删除当前选项（最少保留2个选项）"></i>
                                                                                        </td>
                                                                                        <td>
                                                                                            <i class="fa fa-arrow-circle-up fa-fw" ng-click="moveUp(child.option, $index, 'option')" title="将当前选项上移一个位置"></i>
                                                                                            <i class="fa fa-arrow-circle-down fa-fw" ng-click="moveDown(child.option, $index, 'option')" title="将当前选项下移一个位置"></i>
                                                                                        </td>
                                                                                    </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>

                                                                        <div ng-if="child.type === '3'">
                                                                            <div class="table-responsive question-table">
                                                                                <table class="table table-responsive">
                                                                                    <thead>
                                                                                    <tr>
                                                                                        <th>填空</th>
                                                                                        <th>填空类型</th>
                                                                                        <th>填空属性</th>
                                                                                        <th>操作</th>
                                                                                    </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                    <tr ng-repeat="row in child.option">
                                                                                        <td>填空{{$index + 1}}</td>
                                                                                        <td>
                                                                                            <select ng-model="row.type" class="form-control">
                                                                                                <option ng-repeat="(key, type) in inputTypes track by key" value="{{type.type}}">{{type.typename}}</option>
                                                                                            </select>
                                                                                        </td>
                                                                                        <td class="input-attr">
                                                                                            <form class="form-inline">
                                                                                                <div class="form-group">
                                                                                                    <label>前缀:</label>
                                                                                                    <input type="text" ng-model="row.prefix" class="form-control">
                                                                                                </div>
                                                                                                <div class="form-group">
                                                                                                    <label>后缀:</label>
                                                                                                    <input type="text" ng-model="row.suffix" class="form-control">
                                                                                                </div>
                                                                                                <div class="form-group" ng-if="row.type === '0' || row.type === '1'">
                                                                                                    <label>最小字符:</label>
                                                                                                    <input type="number" ng-model="row.minwords" class="form-control">
                                                                                                </div>
                                                                                                <div class="form-group" ng-if="row.type === '0' || row.type === '1'">
                                                                                                    <label>最大字符:</label>
                                                                                                    <input type="number" ng-model="row.maxwords" class="form-control">
                                                                                                </div>
                                                                                                <div class="form-group" ng-if="row.type === '2' || row.type === '3'">
                                                                                                    <label>最小范围:</label>
                                                                                                    <input type="number" ng-model="row.maxnumber" class="form-control">
                                                                                                </div>
                                                                                                <div class="form-group" ng-if="row.type === '2' || row.type === '3'">
                                                                                                    <label>最大范围:</label>
                                                                                                    <input type="number" ng-model="row.minnumber" class="form-control">
                                                                                                </div>
                                                                                                <div class="form-group" ng-if="row.type === '6'">
                                                                                                    <label>时间格式:</label>
                                                                                                    <select ng-model="row.format" class="form-control">
                                                                                                        <option value="1">年</option>
                                                                                                        <option value="2">年月</option>
                                                                                                        <option value="3">年月日</option>
                                                                                                    </select>
                                                                                                </div>
                                                                                            </form>
                                                                                        </td>
                                                                                        <td>
                                                                                            <i class="fa fa-plus-circle fa-fw" ng-click="addInput(child.option, $index)" title="在此选项下面插入一个新的选项"></i>
                                                                                            <i class="fa fa-minus-circle fa-fw" ng-click="del(child.option, $index, 'input')" title="删除当前选项（最少保留2个选项）"></i>

                                                                                            <i class="fa fa-arrow-circle-up fa-fw" ng-click="moveUp(child.option, $index, 'option')" title="将当前选项上移一个位置"></i>
                                                                                            <i class="fa fa-arrow-circle-down fa-fw" ng-click="moveDown(child.option, $index, 'option')" title="将当前选项下移一个位置"></i>
                                                                                        </td>
                                                                                    </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </fieldset>
                                                            </div>
                                                            <div class="child-add">
                                                                <div class="collapse" id="collapseChildQ">
                                                                    <div class="add-child">
                                                                        <button class="btn btn-primary" ng-click="addChild(option.qchild.length, 1)">单选</button>
<!--                                                                        <button class="btn btn-primary" ng-click="addChild(option.qchild.length, 2)">多选</button>-->
                                                                        <button class="btn btn-primary" ng-click="addChild(option.qchild.length, 3)">填空</button>
                                                                    </div>
                                                                </div>
                                                                <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseChildQ" aria-expanded="false" aria-controls="collapseChildQ" style="width: 100%;"><i class="fa fa-plus"></i>添加新子问题</button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button class="btn btn-danger btn-lg btn-larger" data-dismiss="modal" ng-click="cancel()">取消</button>
                                            <button class="btn btn-primary btn-lg btn-larger" ng-click="saveChild()">保存</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
