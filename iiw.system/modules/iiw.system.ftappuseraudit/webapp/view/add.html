<div class="widget-header">
    <span>{{subTitle}}</span>
</div>
<div class="widget-content">
    <div ng-if="loading.isLoading" class="system-loading-toast" ng-class="loading.className">
        <div class="loading-toast">
            <i class="loading-icon fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            <p class="loading-content">{{loading.content}}...</p>
        </div>
    </div>
    <div class="layout-full">
        <form method="post" class="form-horizontal" id="ftappuserfrom" name="ftappuserfrom">
            <fieldset>
                <div class="control-group col-md-6">
                    <div class="col-md-2">
                        <label class="control-label">姓   名</label>
                    </div>
                    <div class="col-md-7">
                        <div class="form-group">
                            <input type="text" ng-model="userInfo.name" placeholder="输入姓名" class="form-control input-transparent" required id="ftuser_name" name="ftuser_name" />
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="error-text" ng-show="userInfo.name == null">*请输入姓名</div>
                    </div>
                </div>

                <div class="control-group col-md-6">
                    <div class="col-md-2">
                        <label class="control-label">手机号</label>
                    </div>
                    <div class="col-md-7">
                        <div class="form-group">
                            <input type="text" ng-model="userInfo.phone" name="phone" ng-maxlength="11" ng-pattern="/^[1]([3-9])[0-9]{9}$/" placeholder="输入手机号" class="form-control input-transparent" id="ftuser_phone" required/>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="error-text" ng-show="ftappuserfrom.phone.$dirty && ftappuserfrom.phone.$invalid">请输入正确格式的手机号</div>
                    </div>
                </div>

                <div class="control-group col-md-12">
                    <div class="col-md-1">
                        <label class="control-label">编号</label>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="user-code">{{userInfo.role + userInfo.type + userInfo.provincecode + userInfo.phone}}</div>
                        </div>
                    </div>
                </div>

                <div class="control-group col-md-12" ng-class="{'has-error' : (ftappuserfrom.userInfo.password.$invalid)}">
                    <div class="col-md-1">
                        <label for="password-field" class="control-label">密码</label>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-lock"></i></span>
                                <input type="password" ng-model="userInfo.password" placeholder="输入密码" class="form-control" id="ftuser_password" ng-change="checkpwd()" required />
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="error-text" ng-show="userInfo.password == null" style="color:red;">*请输入密码</div>
                        <div class="error-text" ng-show="(!userInfo.password.length && userInfo.password.length < 3) || regPwd" style="color:red;">*请输入8-16位密码且不能包含特殊字符!</div>
                    </div>
                </div>
                <div class="control-group col-md-12" ng-class="{'has-error' : (ftappuserfrom.userInfo.password2.$invalid || pwdcheckfalg == 1)}">
                    <div class="col-md-1">
                        <label for="password-field" class="control-label">确认密码</label>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="fa fa-lock"></i></span>
                                <input type="password"  ng-model="userInfo.password2" placeholder="再次输入密码"  class="form-control" ng-change="checkpwd()" required/>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="error-text" ng-show="userInfo.password2 == null" style="color:red;">*请输入确认密码</div>
                        <div class="error-text" ng-show="pwdcheckfalg == 1" style="color:red;">*两次密码不正确，请重输入！</div>
                        <div class="error-text" ng-show="(userInfo.password2.length != null && userInfo.password2.length < 3) || regPwd" style="color:red;">*请输入8-16位密码且不能包含特殊字符!</div>
                    </div>
                </div>

                <div class="control-group col-md-6">
                    <div class="col-md-2">
                        <label class="control-label">籍贯</label>
                    </div>
                    <div class="col-md-7">
                        <div class="form-group">
                            <input type="text" ng-model="userInfo.origin" placeholder="输入籍贯" class="form-control input-transparent" id="ftuser_origin" required/>
                        </div>
                    </div>
                </div>

                <div class="control-group col-md-6">
                    <div class="col-md-2">
                        <label class="control-label">身份证号</label>
                    </div>
                    <div class="col-md-7">
                        <div class="form-group">
                            <input type="text" ng-model="userInfo.idcard" name="idcard" ng-change="checkidcard()" placeholder="输入身份证号" class="form-control input-transparent" id="ftuser_idcard" required/>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="error-text">{{userInfo.idcard.length || 0}}/18
                        <span ng-show="(ftappuserfrom.idcard.$dirty && ftappuserfrom.idcard.$invalid) || !regIdcard">请输入18位正确身份证号</span>
                        </div>
                    </div>
                </div>

                <div class="control-group col-md-6">
                    <div class="col-md-2">
                        <label class="control-label">邮箱</label>
                    </div>
                    <div class="col-md-7">
                        <div class="form-group">
                            <input type="text" ng-model="userInfo.email" name="email" ng-pattern="/^\w+@[\w\.]+/" placeholder="输入邮箱地址" class="form-control input-transparent" id="ftuser_email" required/>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="error-text" ng-show="ftappuserfrom.email.$dirty && ftappuserfrom.email.$invalid">请输入正确格式的邮箱地址</div>
                    </div>
                </div>

                <div class="control-group col-md-6">
                    <div class="col-md-2">
                        <label class="control-label">所在省份</label>
                    </div>
                    <div class="col-md-7">
                        <div class="form-group">
                            <select ng-model="userInfo.provincecode" name="provincecode" class="form-control" required>
                                <option value="" disabled>请选择所在省份</option>
                                <option ng-repeat="province in provinces" value="{{province.code}}">{{province.name}}</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="control-group col-md-6">
                    <div class="col-md-2">
                        <label class="control-label">用户角色</label>
                    </div>
                    <div class="col-md-7">
                        <div class="form-group">
                            <select ng-model="userInfo.role" class="form-control" required>
                                <option value="" disabled>请选择用户角色</option>
                                <option ng-repeat="(index, role) in userRole track by index" value="{{role.value}}">{{role.name}}</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="control-group col-md-6">
                    <div class="col-md-2">
                        <label class="control-label">管理类型</label>
                    </div>
                    <div class="col-md-7">
                        <div class="form-group">
                            <select ng-model="userInfo.type" class="form-control" required>
                                <option value="" disabled>请选择管理类型</option>
                                <option ng-repeat="item in typeList" value="{{item.type}}">{{item.typename}}</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="control-group col-md-6">
                    <div class="col-md-2">
                        <label class="control-label">审批权限</label>
                    </div>
                    <div class="col-md-7">
                        <div class="form-group">
                            <select ng-model="userInfo.authority" class="form-control" required>
                                <option value="" disabled>请选择用户是否具有审批权限</option>
                                <option value="0">否</option>
                                <option value="1">是</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="control-group col-md-12">
                    <div class="col-md-1">
                        <label class="control-label">所属单位</label>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <input type="text" class="form-control" ng-model="userInfo.syouname" placeholder="选择单位" id="ftuser_syoufk" ng-click="showOuTree()" required ng-disabled="!userInfo.provincecode"/>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <lable ng-show="userInfo.syoufk == null" style="color:red;">*请选择单位</lable>
                        <label ng-model="userInfo.syoufk" class="hidden"></label>
                    </div>
                </div>
            </fieldset>
        </form>
    </div>
    <div class="form-actions">
        <div>
            <button class="btn btn-s-md btn-primary" type="button" ng-click="save()"
            ng-disabled="ftappuserfrom.$invalid || pwdcheckfalg === 1 || !regIdcard">{{saveBtn}}</button>
            <button class="btn btn-s-md btn-default" type="button" ng-click="back()">返     回</button>
        </div>
    </div>
    <div style="display: none;" aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" class="modal fade" id="syouTreeModel">
        <div class="modal-dialog">
            <div class="modal-content" style="height: 560px; ">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancelOu('tree')"><i class="fa fa-remove"></i></button>
                    <h4 class="modal-title">选择单位</h4>
                </div>
                <div class="modal-body" style="height: 510px;">
                    <div class="col-lg-12 iiw-system-treeview-container" style="overflow:auto;">
                        <div style="position: absolute;">
                            <ul system-tree-view ng-model="selectNode" id="sycodeTreeview" class="ztree"></ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary btn-lg btn-larger" data-dismiss="modal" ng-click="cancelOu()">取消</button>
                <button class="btn btn-default btn-lg btn-larger" data-dismiss="modal" ng-click="selectOu()">确定</button>
            </div>
        </div>
    </div>
</div>
