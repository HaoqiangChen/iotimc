<div class="iiw-system-page-container">
    <div class="stretch ui-layout-column" ui-layout="{ flow: 'column'}" options="{dividerSize:'0'}">
        <div class="ui-layout-row" ui-layout="{ flow: 'row'}" options="{dividerSize:'0'}">
            <div class="ui-layout-container iiw-system-module-title-container" size="60px" ui-layout-container>
                <h2 class="page-title">{{title}}</h2>
            </div>
            <div class="ui-layout-container" ui-layout-container>
                <div class="widget layout-full" ui-view>
                    <div class="ui-layout-row" ui-layout="{ flow: 'row'}" options="{dividerSize:'0'}">
                        <div class="widget-header ui-layout-container" size="60px" ui-layout-container>
                            <div class="iiw-system-menu-bar-container" style="width:50%">
                                <a class="btn btn-s-md btn-primary" ng-click="add()"><i class="fa fa-plus"></i>添加</a>
                                <a class="btn btn-s-md btn-success" ng-click="mod()"><i class="fa fa-edit"></i>修改</a>
                                <a class="btn btn-s-md btn-danger" ng-click="delete()"><i class="fa fa-minus"></i>删除</a>
                                <a class="btn btn-s-md btn-info" ng-click="sync()"><i class="fa fa-minus"></i>同步通道</a>
                                <a class="btn btn-s-md btn-warning" ng-click="export()"><i class="fa fa-minus"></i>导出模板</a>
                                <a class="btn btn-s-md btn-default" ng-click="import()"><i class="fa fa-minus"></i>导入</a>

                            </div>
                            <div class="device-system-select">
                                <div class="col-lg-6">
                                    <div class="col-md-5">
                                        <label class="control-label">设备类型：</label>
                                    </div>
                                    <div class="col-md-7 device-index-system-select">
                                        <select  ng-model="indexHardWareType" class="col-md-12 device-select-option" id="indexHardWareType" ng-options="obj.name for obj in entityHardtypeItem" ng-change="searchInfo('hardware')">
                                        </select>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="col-md-5">
                                        <label class="control-label">厂商信息：</label>
                                    </div>
                                    <div class="col-md-7 device-index-system-select">
                                        <select  ng-model="companyType" placeholder="请选择设备厂商" class="col-md-12 device-select-option" id="companyType" ng-change="searchInfo('company')">
                                            <option value="">所有厂商</option>
                                            <option ng-if="indexHardWareType.content != ''" ng-repeat="companyItem in indexHardWareType.child" value="{{companyItem.id}}">{{companyItem.name}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="iiw-system-search-bar-container" style="width: 20%">
                                <label class="pull-right">
                                    <input type="text" id="syuser_search" ng-model="searchTitle" ng-change="searchInfo()" placeholder="{{keyword}}"/>
                                </label>
                            </div>
                        </div>
                        <div class="widget-content ui-layout-container" ui-layout-container>
                            <div class="layout-full" style="position: relative; display:inline-block;">
                                <div>
                                    <table class="table table-hover iiw-system-table-container">
                                        <thead>
                                        <tr>
                                            <th class="iiw-system-table-header-container">
                                                <input id="checkAll1" type="checkbox" ng-model="selectAll1" ng-change="selAll()">
                                            </th>
                                            <th>序号</th>
                                            <th>编号</th>
                                            <th>设备名称</th>
                                            <th>所属单位</th>
                                            <th>类  型</th>
                                            <th>厂  商</th>
                                            <th>IP地址</th>
                                            <th>端  口</th>
                                            <th class="hidden-xs">状态</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="zrow in entityItem">
                                            <td class="iiw-system-table-header-container">
                                                <system-row-check ng-model="zrow.checked" class="rowCheck"></system-row-check>
                                            </td>
                                            <td>{{$index+1}}</td>
                                            <td>{{zrow.code}}</td>
                                            <td>{{zrow.name}}</td>
                                            <td>{{zrow.syouname}}</td>
                                            <td>{{zrow.typename}}</td>
                                            <td>{{zrow.company}}</td>
                                            <td>{{zrow.ip}}</td>
                                            <td>{{zrow.port}}</td>
                                            <td ng-if="zrow.status == 'P'" >启用</td>
                                            <td ng-if="zrow.status == 'C'" >禁用</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="pagination ui-layout-container pagination-layout-container" size="60px" ui-layout-container>
                            <uib-pagination boundary-links="true" first-text="&laquo;" last-text="&raquo;" class="pagination pull-right" total-items="totalSize" ng-model="currentPage" ng-change="pageChanged()" items-per-page="pageSize" previous-text="上一页" next-text="下一页" max-size="5"></uib-pagination>
                        </div>
                    </div>
                </div>

                <div style="display: none;" aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" class="modal fade" id="singleSyncModel">
                    <div class="modal-dialog" style="margin:30px 350px;">
                        <div class="modal-content" style="height: 818px; width:1367px;" >
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"  ng-click="cancel('sync')"><i class="fa fa-remove"></i></button>
                                <h4 class="modal-title">通道同步</h4>
                            </div>
                            <div class="modal-body" style="height: 668px;">
                                <div class="widget-content">
                                    <div>
                                        <div class="col-md-6">
                                            <label for="normal-field" class="control-label">设备名称：</label>
                                            <label for="normal-field" class="control-label">{{syncEntityItem.devicename}}</label>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="normal-field" class="control-label">设备IP：</label>
                                            <label for="normal-field" class="control-label">{{syncEntityItem.deviceip}}</label>
                                        </div>
                                    </div>
                                    <hr/>
                                    <div>
                                        <div class="col-md-6">
                                            <label for="normal-field" class="control-label">通道数：</label>
                                            <label for="normal-field" class="control-label">{{syncEntityItem.count}}</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="widget-content" style="padding: 0px;">
                                    <!--<div style="height: 453px">-->
                                        <!--<div class="layout-full" style="position: relative; display:inline-block; overflow-y: auto;">-->
                                            <!--<div ng-if="isSnycing == false">-->
                                                <!--<label>通道名称正在同步中，请等待...</label>-->
                                            <!--</div>-->
                                            <!--<div ng-if="isSnycing == true">-->
                                                <!--<table class="table table-hover iiw-system-table-container">-->
                                                    <!--<thead>-->
                                                    <!--<tr>-->
                                                        <!--<th class="iiw-system-table-header-container">-->
                                                            <!--<input id="checkAll" type="checkbox" ng-model="selectAll" ng-change="selChannel()">-->
                                                        <!--</th>-->
                                                        <!--<th>序号</th>-->
                                                        <!--<th>通道名称</th>-->
                                                    <!--</tr>-->
                                                    <!--</thead>-->
                                                    <!--<tbody>-->
                                                    <!--<tr ng-repeat="zrow in syncEntityItem.monitors">-->
                                                        <!--<td class="iiw-system-table-header-container">-->
                                                            <!--<system-row-check ng-model="zrow.checked" class="rowCheck"></system-row-check>-->
                                                        <!--</td>-->
                                                        <!--<td>{{$index+1}}</td>-->
                                                        <!--<td>{{zrow.name}}</td>-->
                                                    <!--</tr>-->
                                                    <!--</tbody>-->
                                                <!--</table>-->
                                            <!--</div>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                    <div class="search clearfix" style="margin-left: 80%; margin-bottom: 5px; background: none; border: 0;">
                                        <button class="btn btn-default pull-right" ng-click="criminal.search()"><i class="fa fa-search"></i></button>
                                        <input type="text" class="form-control pull-right" ng-model="syncEntityItem.filterText" placeholder="请输入查询条件" style="width: 80%;" />
                                    </div>
                                    <div class="layout-full">
                                        <div class="widget-content-panel" ng-if="syncMode == ''">
                                            <div class="content-panel-title">
                                                <i class="fa fa-plus"></i> 新增
                                            </div>
                                            <div class="content-panel-body">
                                                <div class="table-panel">
                                                    <div class="table-header">
                                                        <table class="table table-hover iiw-system-table-container" style="margin: 0;width: 100%;">
                                                            <col width="60px">
                                                            <col width="108px">
                                                            <col width="228px">
                                                            <thead>
                                                            <tr>
                                                                <th class="iiw-system-table-header-container">
                                                                    <input id="checkAllInsert" type="checkbox" ng-model="selectAllInsert" ng-change="selChannel('insert')" ng-disabled="syncEntityItem.insert.length > 1000">
                                                                </th>
                                                                <th>序号</th>
                                                                <th>通道名称</th>
                                                            </tr>
                                                            </thead>
                                                        </table>
                                                    </div>
                                                    <div class="table-content">
                                                        <div class="layout-full" i-scroll2>
                                                            <table class="table table-hover iiw-system-table-container">
                                                                <col width="60px">
                                                                <col width="108px">
                                                                <col width="228px">
                                                                <tbody>
                                                                <tr ng-repeat="zrow in syncEntityItem.insert | filter: {name: syncEntityItem.filterText} track by $index">
                                                                    <td class="iiw-system-table-header-container">
                                                                        <system-row-check ng-model="zrow.checked" class="rowCheck"></system-row-check>
                                                                    </td>
                                                                    <td>{{$index+1}}</td>
                                                                    <td>{{zrow.name}}</td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="content-panel-footer clearfix" ng-if="syncEntityItem.insert.length > 1000">
                                                <div class="pull-left">
                                                    <button class="btn btn-sm btn-default" ng-click="selChannelByNum(1000, 'insert')">选择1000条数据</button>
                                                </div>
                                                <div class="pull-right">共 {{syncEntityItem.insert.length}} 条数据</div>
                                            </div>
                                        </div>
                                        <div class="widget-content-panel" ng-style="{'width': syncMode != '' ? '100%' : ''}">
                                            <div class="content-panel-title">
                                                <i class="fa fa-edit"></i> 修改
                                            </div>
                                            <div class="content-panel-body">
                                                <div class="table-panel">
                                                    <div class="table-header">
                                                        <table class="table table-hover iiw-system-table-container" style="margin: 0;width: 100%;">
                                                            <col width="60px">
                                                            <col width="108px">
                                                            <col width="228px">
                                                            <thead>
                                                            <tr>
                                                                <th class="iiw-system-table-header-container">
                                                                    <input id="checkAllUpdate" type="checkbox" ng-model="selectAllUpdate" ng-change="selChannel('update')" ng-disabled="syncEntityItem.update.length > 1000">
                                                                </th>
                                                                <th>序号</th>
                                                                <th>通道名称</th>
                                                            </tr>
                                                            </thead>
                                                        </table>
                                                    </div>
                                                    <div class="table-content">
                                                        <div class="layout-full" i-scroll2>
                                                            <table class="table table-hover iiw-system-table-container">
                                                                <col width="60px">
                                                                <col width="108px">
                                                                <col width="228px">
                                                                <tbody>
                                                                <tr ng-repeat="zrow in syncEntityItem.update | filter: {name: syncEntityItem.filterText} track by $index">
                                                                    <td class="iiw-system-table-header-container">
                                                                        <system-row-check ng-model="zrow.checked" class="rowCheck"></system-row-check>
                                                                    </td>
                                                                    <td>{{$index+1}}</td>
                                                                    <td>{{zrow.name}}</td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="content-panel-footer clearfix" ng-if="syncEntityItem.update.length > 1000">
                                                <div class="pull-left">
                                                    <button class="btn btn-sm btn-default" ng-click="selChannelByNum(1000, 'update')">选择1000条数据</button>
                                                </div>
                                                <div class="pull-right">共 {{syncEntityItem.update.length}} 条数据</div>
                                            </div>
                                        </div>
                                        <div class="widget-content-panel" style="width: 40%;" ng-if="syncMode == ''">
                                            <div class="content-panel-title">
                                                <i class="fa fa-trash"></i> 删除
                                            </div>
                                            <div class="content-panel-body">
                                                <div class="table-panel">
                                                    <div class="table-header">
                                                        <table class="table table-hover iiw-system-table-container" style="margin: 0;width: 100%;">
                                                            <col width="60px">
                                                            <col width="60px">
                                                            <col width="120px">
                                                            <col width="145px">
                                                            <col width="145px">
                                                            <thead>
                                                            <tr>
                                                                <th class="iiw-system-table-header-container">
                                                                    <input id="checkAllDelete" type="checkbox" ng-model="selectAllDelete" ng-change="selChannel('del')" ng-disabled="syncEntityItem.del.length > 1000">
                                                                </th>
                                                                <th>序号</th>
                                                                <th>通道名称</th>
                                                                <th>区域</th>
                                                                <th>地图</th>
                                                            </tr>
                                                            </thead>
                                                        </table>
                                                    </div>
                                                    <div class="table-content">
                                                        <div class="layout-full" i-scroll2>
                                                            <table class="table table-hover iiw-system-table-container">
                                                                <col width="60px">
                                                                <col width="60px">
                                                                <col width="120px">
                                                                <col width="145px">
                                                                <col width="145px">
                                                                <tbody>
                                                                <tr ng-repeat="zrow in syncEntityItem.del | filter: {name: syncEntityItem.filterText} track by $index">
                                                                    <td class="iiw-system-table-header-container">
                                                                        <system-row-check ng-model="zrow.checked" class="rowCheck"></system-row-check>
                                                                    </td>
                                                                    <td>{{$index+1}}</td>
                                                                    <td>{{zrow.name}}</td>
                                                                    <td>{{zrow.dtlname}}</td>
                                                                    <td>{{zrow.mapname}}</td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="content-panel-footer clearfix" ng-if="syncEntityItem.del.length > 1000">
                                                <div class="pull-left">
                                                    <button class="btn btn-sm btn-default" ng-click="selChannelByNum(1000, 'del')">选择1000条数据</button>
                                                </div>
                                                <div class="pull-right">共 {{syncEntityItem.del.length}} 条数据</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-primary btn-lg btn-larger" ng-click="cancel('sync')">取消</button>
                                <button class="btn btn-default btn-lg btn-larger" ng-click="saveChannel()">保存</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="display: none;" aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" class="modal fade" id="mySyncModal">
                    <div class="modal-dialog" style="margin:30px 440px;">
                        <div class="modal-content" style="height: 768px; width:1024px;" >
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-remove"></i></button>
                                <h4 class="modal-title">批量同步</h4>
                            </div>
                            <div class="modal-body" style="height: 618px; overflow-y:auto;">
                                <div ng-if="isBatchSnycing == false" class="widget-content" >
                                    <label>通道名称正在同步中，请等待...</label>
                                </div>
                                <div ng-if="isBatchSnycing == true" class="widget-content" ng-repeat="zrow in syncAllEntityItem">
                                    <div>
                                        <div class="col-md-4">
                                            <label for="normal-field" class="control-label">设备名称：</label>
                                            <label for="normal-field" class="control-label">{{zrow.devicename}}</label>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="normal-field" class="control-label">设备IP：</label>
                                            <label for="normal-field" class="control-label">{{zrow.deviceip}}</label>
                                        </div>
                                        <div class="col-md-4">
                                            <label for="normal-field" class="control-label">通道数：</label>
                                            <label for="normal-field" class="control-label">{{zrow.count}}</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-primary btn-lg btn-larger" data-dismiss="modal">取消</button>
                                <button class="btn btn-default btn-lg btn-larger" data-dismiss="modal" ng-click="saveBatchChannel()">保存</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="display: none;" aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" class="modal fade" id="monitorChannelModel">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel('monitor')"><i class="fa fa-remove"></i></button>
                                <h4 class="modal-title">通道同步</h4>
                            </div>
                            <div class="modal-body">
                                <div class="widget-content">
                                    <div class="col-md-12">
                                        <label for="normal-field" class="control-label">设备添加成功！</label>
                                    </div>
                                    <hr/>
                                    <div class="col-md-12">
                                        <label for="normal-field" class="control-label">是否同步通道名称！</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                            <div class="modal-footer">
                                <button class="btn btn-primary btn-lg btn-larger" data-dismiss="modal" ng-click="cancel('monitor')">取消</button>
                                <button class="btn btn-default btn-lg btn-larger" data-dismiss="modal" ng-click="syncDevice()">同步</button>
                            </div>
                        </div>
                    </div>

                <div style="display: none;" aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" class="modal fade" id="syouTreeModel">
                    <div class="modal-dialog">
                        <div class="modal-content" style="height: 560px; ">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="cancel('tree')"><i class="fa fa-remove"></i></button>
                                <h4 class="modal-title">选择单位</h4>
                            </div>
                            <div class="modal-body" style="height: 510px;">
                                <div class="col-lg-12 widget-content iiw-system-treeview-container" style="padding: 0px;">
                                    <div style="width:100%;height:100%;overflow: hidden;position: relative;" i-scroll>
                                        <div>
                                            <ul system-tree-view ng-model="selectNode" id="sycodeTreeview" class="ztree"></ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary btn-lg btn-larger" data-dismiss="modal" ng-click="cancel('tree')">取消</button>
                            <button class="btn btn-default btn-lg btn-larger" data-dismiss="modal" ng-click="selectOu()">确定</button>
                        </div>
                    </div>
                </div>
                <div>
                    <export-excel></export-excel>
                </div>
            </div>
        </div>
    </div>
</div>