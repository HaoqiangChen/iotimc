<div ng-show="showDeviceDialog">
    <div class="iiw-system-preplan-device-background-container" ng-click="hideModal()"></div>
    <div class="iiw-system-preplan-device-content-container">
        <div class="ui-layout-row iiw-system-preplan-layout-container" ui-layout="{ flow: 'row'}" options="{dividerSize:'0'}">
            <div class="iiw-system-preplan-device-content-header-container ui-layout-container fz-4" ui-layout-container size="60px">调度资源配置</div>
            <div class="iiw-system-preplan-device-content-body-container ui-layout-container" ui-layout-container>
                <div class="iiw-system-preplan-device-list-container">
                    <div class="layout-full iiw-system-preplan-device-list-container-inner">
                        <div ui-layout="{flow: 'row'}" options="{dividerSize:'0'}" class="ui-layout-row">
                            <div size="62px" class="ui-layout-container iiw-system-preplan-type-navbar" ui-layout-container>
                                <ul class="nav nav-pills">
                                    <li ng-repeat="row in types" ng-class="{true:'active',false:''}[row.type == deviceType]" ng-click="searchDevice(row)"><a>{{row.name}}</a></li>
                                </ul>
                            </div>
                            <div size="39px" class="ui-layout-container iiw-system-preplan-device-search-container" ui-layout-container>
                                <div class="input-group btn-search-group">
                                    <input type="text" class="form-control" ng-model="preplanItemList.searchTitle" placeholder="请输入关键字进行查询" ng-keypress="enterSearch($event)">
                                    <span class="input-group-addon" ng-click="getDeviceByType()" style="cursor: pointer;;"><i class="fa fa-search">搜索</i></span>
                                </div>
                            </div>
                            <div class="ui-layout-container layout-full iiw-system-preplan-device-table-container" ui-layout-container>
                                <div class="iiw-system-preplan-device-table-list" i-scroll>
                                    <div ng-show="!loadStatus">
                                        <div ng-repeat="row in list" class="row" ng-click="chooseDevice(row)">
                                            <div class="col-md-4 text-center iiw-system-preplan-device-attr-info">
                                                {{row.name}}
                                            </div>
                                            <div class="col-md-4 text-center iiw-system-preplan-device-attr-info">
                                                {{row.syouname}}
                                            </div>
                                            <div class="col-md-4 text-center iiw-system-preplan-device-attr-info">
                                                {{(row.type == 'police' || row.type == 'telephone' || row.type == 'interphone' || row.type == 'duty') ? (row.phone?row.phone:row.cellphone):row.ip}}
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-show="loadStatus" class="text-center" style="margin-top: 20%;">
                                        <i style="font-size: 48px; margin-bottom:20px;" class="fa fa-spinner fa-spin"></i>
                                        <p>正在努力的加载数据!</p>
                                    </div>
                                </div>
                            </div>
                            <div size="60px" class="ui-layout-container" ui-layout-container>
                                <div class="pull-right iiw-system-preplan-device-pagination-container">
                                    <uib-pagination boundary-links="true" first-text="&laquo;" last-text="&raquo;" class="pull-right" total-items="preplanItemList.totalSize" ng-model="preplanItemList.currentPage" ng-change="getDeviceByType()" items-per-page="preplanItemList.pageSize" previous-text="上一页" next-text="下一页" max-size="5"></uib-pagination>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="iiw-system-preplan-device-list-container">
                    <div class="layout-full iiw-system-preplan-device-list-container-inner">
                        <div ui-layout="{flow: 'row'}" options="{dividerSize:'0'}" class="ui-layout-row">
                            <div size="62px" class="ui-layout-container iiw-system-preplan-device-selected-header" ui-layout-container>
                                <span>已选择资源（<b>{{currentStep.dispatchdevice?currentStep.dispatchdevice.length:0}}</b>）</span><a class="pull-right iiw-system-preplan-select-device-clean" ng-click="clean()">清除</a>
                            </div>
                            <div class="ui-layout-container layout-full iiw-system-preplan-device-choose-list-container" ui-layout-container>
                                <div class="iiw-system-preplan-device-selected-list layout-full" i-scroll>
                                    <div>
                                        <table class="table table-hover iiw-system-table-container">
                                            <tbody>
                                            <tr ng-repeat="row in currentStep.dispatchdevice">
                                                <td class="iiw-system-preplan-device-row-column"><h5>{{row.devicename ? row.devicename : row.name}}</h5></td>
                                                <td class="iiw-system-preplan-device-row-column"><h5>{{row.syouname}}</h5></td>
                                                <td class="iiw-system-preplan-device-row-column">
                                                    <select ng-model="row.devicecomm" class="col-md-5" ng-if="row.devicetype == 'door' || row.devicetype == 'broadcast' || row.devicetype == 'talk' || row.devicetype == 'alarm'">
                                                        <option ng-repeat="actionRow in row.actions" value="{{actionRow.action}}" >{{actionRow.name}}</option>
                                                    </select>
                                                </td>
                                                <td class="iiw-system-preplan-device-row-column">{{row.deviceip}} <i class="fa fa-remove pull-right" ng-click="removeSelect(row)"></i></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="ui-layout-container iiw-system-form-button-layout-container text-right" size="60px" ui-layout-container>
                <button class="btn btn-success btn-s-md" ng-click="hideModal()">保存</button>
                <button class="btn btn-danger btn-s-md"  ng-click="hideModal()">取消</button>
            </div>
        </div>
    </div>
</div>