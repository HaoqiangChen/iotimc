<div class="row">
    <div class="ui-layout-column" ui-layout="{ flow: 'column'}" options="{dividerSize:'0'}">
        <div class="ui-layout-row" ui-layout="{ flow: 'row'}" options="{dividerSize:'0'}">
            <div class="widget-header ui-layout-container" size="60px" ui-layout-container>
                <i class="icon-align-left"></i>
                <h3>修改设备</h3>
            </div>
            <div class="widget-content iiw-system-scroll ui-layout-container" ui-layout-container>
                <form method="post" class="form-horizontal" id="deviceform" name="deviceform" novalidate>
                    <fieldset>
                        <div class="row" style="margin-bottom:10px;">
                            <div class="col-lg-12">
                                <div class="widget-content">
                                    <div class="control-group" ng-class="{'has-error' : (deviceform.hardwaretype.$invalid || deviceform.companyID.$invalid)}">
                                        <div class="col-lg-6 full-left">
                                            <div class="col-md-2">
                                                <label class="control-label">设备类型：</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <select  ng-model="hardwaretype" class="col-md-12 device-select-option" id="hardwaretype" ng-options="obj.name for obj in entityHardItem" required disabled></select>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <lable ng-show="hardwaretype == null" style="color:red;">*请选择设备类型</lable>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 full-left">
                                            <div class="col-md-2">
                                                <label class="control-label">设备厂商：</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <select  ng-model="companyID" placeholder="请选择设备厂商" class="col-md-12 device-select-option" id="entityItem_company" ng-change="showItemPropertie(this)" required disabled>
                                                        <option ng-repeat="companyItem in hardwaretype.child" value="{{companyItem.id}}">{{companyItem.name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <lable ng-show="companyID == null" style="color:red;">*请选择设备厂商</lable>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="control-group" ng-class="{'has-error' : (deviceform.entityItem.name.$invalid)}">
                                        <div class="col-lg-6 full-left">
                                            <div class="col-md-2">
                                                <label class="control-label">设备名称：</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" ng-model="entityItem.name" placeholder="输入名称" class="form-control" id="entityItem_name" required />
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <lable ng-show="entityItem.name == null" style="color:red;">*请输入设备名称</lable>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 full-left">
                                            <div class="col-md-2">
                                                <label class="control-label">简   称：</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" ng-model="entityItem.alias" placeholder="输入设备简称" class="form-control" id="entityItem_alias"/>
                                                </div>
                                            </div>
                                            <div class="col-md-4"></div>
                                        </div>
                                    </div>

                                    <div class="control-group" ng-class="{'has-error' : (deviceform.entityItem.syouname.$invalid)}">
                                        <div class="col-lg-6 full-left">
                                            <div class="col-md-2">
                                                <label class="control-label">编   号：</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" ng-model="entityItem.code" placeholder="输入编号" class="form-control" id="entityItem_code" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 full-left">
                                            <div class="col-md-2">
                                                <label class="control-label">所属单位：</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" ng-model="entityItem.syouname" placeholder="选择单位名称" class="form-control" id="entityItem_syoufk" ng-click="showOuTree()" required/>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <lable ng-show="entityItem.syoufk == null" style="color:red;">*请选择单位名称</lable>
                                                <label ng-mode="entityItem.syoufk" class="hidden"></label>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="control-group">
                                        <div class="col-lg-6 full-left">
                                            <div class="col-md-2">
                                                <label class="control-label">IP地址：</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" ng-model="entityItem.ip" placeholder="输入IP地址" class="form-control" id="entityItem_ip" />
                                                </div>
                                            </div>
                                            <div class="col-md-4"></div>
                                        </div>
                                        <div class="col-lg-6 full-left">
                                            <div class="col-md-2">
                                                <label class="control-label">端   口：</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" ng-model="entityItem.port" placeholder="输入端口" class="form-control" id="entityItem.port"/>
                                                </div>
                                            </div>
                                            <div class="col-md-4"></div>
                                        </div>
                                    </div>

                                    <div class="control-group" ng-class="{'has-error' : (deviceform.entityItem.status.$invalid)}">
                                        <div class="col-lg-6 full-left">
                                            <div class="col-md-2">
                                                <label class="control-label">状   态：</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <select  ng-model="entityItem.status" placeholder="请选择状态" class="col-md-12 syrole-select-option" id="entityItem_status" required>
                                                        <option value="">请选择状态</option>
                                                        <option value="P">启用</option>
                                                        <option value="C">禁用</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-4"></div>
                                        </div>
                                        <div class="col-lg-6 full-left">
                                            <div class="col-md-2">
                                                <label class="control-label">所属项目：</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" ng-model="entityItem.project" placeholder="输入所属项目" class="form-control" id=""/>
                                                </div>
                                            </div>
                                            <div class="col-md-4"></div>
                                        </div>
                                    </div>

                                    <div class="control-group">
                                        <div class="col-lg-6 full-left">
                                            <div class="col-md-2">
                                                <label class="control-label">是否启连接：</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <select  ng-model="entityItem.islink" placeholder="请选择是否自启动连接" class="col-md-12 syrole-select-option" id="entityItem_islink" required>
                                                        <option value="">请选择状态</option>
                                                        <option value="Y">是</option>
                                                        <option value="N">否</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <label>启连接设置是此设备登录系统是否自动连接设备，默认否即可</label>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 full-left">
                                            <div class="col-md-2">
                                                <label class="control-label">编   码：</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" ng-model="entityItem.notes" placeholder="输入编码" class="form-control" id="entityItem_notes" />
                                                </div>
                                            </div>
                                            <div class="col-md-4"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" style="margin-bottom: 10px;">
                            <div class="col-lg-12">
                                <div class="widget-header device-properties-haader">
                                    <h5>特有属性</h5>
                                </div>
                                <div class="widget-content">
                                    <div class="control-group col-lg-6" ng-repeat="entityPItem in entityPropertiesItem" style="height: 54px;">
                                        <div class="col-lg-12 full-left" ng-if="entityPItem.sign == '0'">
                                            <div class="col-md-2">
                                                <label class="control-label" style="text-align: left;">{{entityPItem.name}}</label>
                                            </div>
                                            <div class="col-md-5">
                                                <div class="form-group" ng-if="entityPItem.content == 'alarmLevel'">
                                                    <select class="form-control" ng-model="entityPItem.keyvalue" ng-if="entityPItem.content == 'alarmLevel'" style="border: 1px solid rgba(255,255,255,0.5);">
                                                        <option value="{{level.content}}" ng-repeat="level in alarmLevelList">{{level.name}}</option>
                                                    </select>
                                                </div>
                                                <div class="form-group" ng-if="entityPItem.content != 'alarmLevel'">
                                                    <input  type="text" ng-model="entityPItem.keyvalue" class="form-control" ng-change="changeItemAttr(entityPItem.keyvalue, $index)" placeholder="请输入{{entityPItem.name}}" deviceproId="{{entityItem.id}}"/>
                                                </div>
                                            </div>
                                            <!--<div class="col-md-4" ng-if="entityPItem.content == 'alarmstyle'" style="line-height: 40px;">0：应急报警，1：设备报警</div>-->
                                            <div class="col-md-5" style="line-height: 35px;" ng-if="entityPItem.cascadeStatus">
                                                <span>批量更新同厂家设备:</span>
                                                <select class="form-control" style="width:110px;float: right;" ng-model="entityPItem.cascade">
                                                    <option value="">否</option>
                                                    <option value="1">是</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 full-left" ng-if="entityPItem.sign == '1'">
                                            <div class="col-md-2">
                                                <label class="control-label">{{entityPItem.name}}</label>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group" ng-show="entityPItem.content == 'dooralarmtype'">
                                                    <input type="text" ng-model="devicedetail" class="form-control" placeholder="请选择{{entityPItem.name}}" deviceproId="{{entityItem.id}}" ng-click="showDeviceDetail()"/>
                                                </div>
                                                <div class="form-group" ng-show="entityPItem.content != 'dooralarmtype'">
                                                    <input type="text" ng-model="entityPItem.ounames" class="form-control" placeholder="请选择{{entityPItem.name}}" deviceproId="{{entityItem.id}}" ng-click="showOuTree(entityPItem)"/>
                                                </div>
                                            </div>
                                            <div class="col-md-4"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row" style="margin-bottom: 10px;">
                            <div class="col-md-12">
                                <div class="widget-header device-properties-haader">
                                    <h5>其他属性：</h5>
                                </div>
                                <div class="widget-content">
                                    <div class="control-group">
                                        <div class="col-md-6" ng-repeat="other in entityPropertiesOther">
                                            <div class="col-md-2">
                                                <label for="normal-field" class="control-label">{{other.name}}：</label>
                                            </div>
                                            <div ng-if="other.content == 'responsible'" class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" class="form-control" ng-click="showUserTree()" ng-model="other.syusername" placeholder="请输入{{other.name}}" required/>
                                                </div>
                                            </div>
                                            <div ng-if="other.content == 'responsible'" class="col-md-4">
                                                <lable ng-show="other.keyvalue == null" style="color:red;">*请选择设备登记人</lable>
                                            </div>
                                            <div ng-if="other.content == 'installtime'" class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" class="form-control" ng-model="other.keyvalue" placeholder="请输入{{other.name}}"/>
                                                </div>
                                            </div>
                                            <div ng-if="other.content == 'installplace'" class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" class="form-control" ng-model="other.keyvalue" placeholder="请输入{{other.name}}"/>
                                                </div>
                                            </div>
                                            <div ng-if="other.content == 'repairperiod'" class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" class="form-control" ng-model="other.keyvalue" placeholder="请输入{{other.name}}"/>
                                                </div>
                                            </div>
                                            <div ng-if="other.content == 'venderphone'" class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" class="form-control" ng-model="other.keyvalue" placeholder="请输入{{other.name}}"/>
                                                </div>
                                            </div>
                                            <div ng-if="other.content == 'supplier'" class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" class="form-control" ng-model="other.keyvalue" placeholder="请输入{{other.name}}"/>
                                                </div>
                                            </div>
                                            <div ng-if="other.content == 'supplierphone'" class="col-md-6">
                                                <div class="form-group">
                                                    <input type="text" class="form-control" ng-model="other.keyvalue" placeholder="请输入{{other.name}}"/>
                                                </div>
                                            </div>
                                            <div class="col-md-4"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </fieldset>
                    <div class="form-actions">
                        <div>
                            <button class="btn btn-s-md btn-primary" type="button" ng-click="save()" ng-disabled="deviceform.$invalid">保     存</button>
                            <button class="btn btn-s-md btn-default" type="button" ng-click="back()">返     回</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script type="text/ng-template" id="userTreeDialog.html">
    <div class="modal-header">
        <h3 class="modal-title">用户树</h3>
    </div>
    <div class="modal-body system-monitorpatrol-usertree-body">
        <div class="layout-full" i-scroll>
            <ul monitorpatrol-tree data="userTree" class="ztree"></ul>
        </div>
    </div>
</script>